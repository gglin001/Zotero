Hindawi Journal of Healthcare Engineering Volume 2018, Article ID 4038034, 15 pages https://doi.org/10.1155/2018/4038034

Research Article
Analysis of a Pulse Rate Variability Measurement Using a Smartphone Camera

Andr√°s B√°nhalmi ,1 J√°nos Borb√°s,2 M√°rta Fidrich,1 Vilmos Bilicki,1 Zolt√°n Gingl,1 and L√°szl√≥ Rudas3
1Institute of Informatics, University of Szeged, Szeged, 2 √Årp√°d Square 6720, Hungary 22nd Department of Internal Medicine and Cardiology Clinic, University of Szeged, Szeged, 6 Semmelweis Street 6725, Hungary 3Department of Anesthesiology and Intensive Therapy, University of Szeged, Szeged, 6 Semmelweis Street 6725, Hungary
Correspondence should be addressed to Andr√°s B√°nhalmi; banhalmi@inf.u-szeged.hu
Received 29 September 2017; Revised 20 November 2017; Accepted 7 December 2017; Published 5 February 2018
Academic Editor: Agusti Solanas
Copyright ¬© 2018 Andr√°s B√°nhalmi et al. This is an open access article distributed under the Creative Commons Attribution License, which permits unrestricted use, distribution, and reproduction in any medium, provided the original work is properly cited.
Background. Heart rate variability (HRV) provides information about the activity of the autonomic nervous system. Because of the small amount of data collected, the importance of HRV has not yet been proven in clinical practice. To collect population-level data, smartphone applications leveraging photoplethysmography (PPG) and some medical knowledge could provide the means for it. Objective. To assess the capabilities of our smartphone application, we compared PPG (pulse rate variability (PRV)) with ECG (HRV). To have a baseline, we also compared the diÔ¨Äerences among ECG channels. Method. We took Ô¨Åfty parallel measurements using iPhone 6 at a 240 Hz sampling frequency and Cardiax PC-ECG devices. The correspondence between the PRV and HRV indices was investigated using correlation, linear regression, and Bland-Altman analysis. Results. High PPG accuracy: the deviation of PPG-ECG is comparable to that of ECG channels. Mean deviation between PPG-ECG and two ECG channels: RR: 0.01 ms‚Äì0.06 ms, SDNN: 0.78 ms‚Äì0.46 ms, RMSSD: 1.79 ms‚Äì1.21 ms, and pNN50: 2.43%‚Äì1.63%. Conclusions. Our iPhone application yielded good results on PPG-based PRV indices compared to ECG-based HRV indices and to diÔ¨Äerences among ECG channels. We plan to extend our results on the PPG-ECG correspondence with a deeper analysis of the diÔ¨Äerent ECG channels.

1. Introduction
Heart rate variability (HRV) is a rarely used clinical term, but it provides useful information about the variation between consecutive heart beats. HRV parameters could help to describe the activity of the autonomic nervous system (ANS), and through this, we can get a better picture about the status of our health [1].
Most of previous studies in the area of HRV measurements just focused on the technical or the medical aspects. Studies describing relations between these two are quite rare. Many of the medical studies do not investigate the new analytical methods, and most of the new methods have not been validated in medical experiments. The value of our study is based on this economically and medically relevant problem, and we try to solve it using tools taken from information

technologies [2]. A medically relevant problem is, for example, the diagnosis and treatment of the cardiovascular diseases, which are the cause of the 37% of global mortality (2012), corresponding to as many as 17.5 million people. Out of these, 6 million people were under 70 years old and 7.4 million of them died from coronary artery disease [3]. The relation between HRV and coronary artery diseases was found relatively early [1]: ‚ÄúThe observation that in patients with an acute MI, the absence of respiratory sinus arrhythmias is associated with an increase in ‚Äúin-hospital‚Äù mortality represents the Ô¨Årst of a large number of reports which have demonstrated the prognostic value of assessing HRV to identify high-risk patients.‚Äù
Hence, this is why it would be beneÔ¨Åcial to build up a widely accessible service, which can be used easily to measure HRV not just in a hospital but anywhere. This service could

2

Journal of Healthcare Engineering

ECG

PPG

NN1

NN2

NN3

PP1

PP2

PP3

{[NNi,ti]} ‚ÜíPRV

{[PPi,ti]} ‚ÜíPRV

Figure 1: Connection between HRV and PRV analysis. From the ECG signal, the NN intervals (time durations) are determined, with the corresponding timestamps. The timestamps are needed when spectral analysis is applied to the NN time serial. The data for PRV is similarly obtained from the PP durations between the consecutive maximum values in the PPG signal.

improve the quality of life and survival chances of those who are diagnosed with such problems. However, there is a lack of systematic statistical evaluation of the additive prognostic value of the new methods [2]. Over the past 30 years, the literature has not provided much support for the real clinical utilization of HRV. It is anticipated that new methods will aid studies involving large populations, which hopefully will allow us to expand our physiological knowledge and improve our understanding of its clinical relevance [2]. Previously published articles presented new methods and analytical techniques on this topic [4‚Äì8]. However, a breakthrough has not been achieved since we have so far failed to collect a critical amount of data from either healthy or sick populations [2].
A new HRV registration technique is needed that can record professionally validated data even by a layman, anytime and anywhere. One possible method might be photoplethysmography (PPG), which can be used to measure pulse rate variability (PRV) on the limbs. PRV and HRV have good correlations, and it was conÔ¨Årmed by several previous publications [9‚Äì11]. The relation among the HRV, ECG (electrocardiogram), PRV (pulse rate variability), and PPG (photoplethysmogram) is shown in Figure 1. ECG is a voltage signal, while PPG is the time serial got from digitalizing the measurements of the reÔ¨Çected or absorbed light, which changes with the periodic blood Ô¨Çow. PRV can be easily measured with the help of a smartphone Ô¨Çash and camera [12, 13] (or using other low-cost tools [14]). The operation of PPG is well formulated by the authors of [15]: ‚ÄúPPG is measured via reÔ¨Çection through the illumination of the skin using an LED (e.g., the smartphone‚Äôs Ô¨Çash) and through the detection of the amount of light that is reÔ¨Çected by a photodetector or a camera located next to the light source. The resulting PPG signal is composed of a direct current (DC) component, which varies slowly depending on tissue properties and blood volume. The alternating current (AC) component varies more rapidly to detect the pulsatile factor. After cardiac systole, local blood volume increases acutely, reducing the received light intensity. During diastole, blood volume decreases and light reÔ¨Çection increases.‚Äù The intuitive explanation behind the theory of substituting heart rate with pulse rate lies in the common physiological origin of the two signals. However, the ECG signal is an electrical voltage signal, and the PPG signal is measured

by light reÔ¨Çection or absorption; the maximum values of both signals are related to cardiac systole.
Using a smartphone as a PPG makes the registration more user friendly than previous ECG measurement techniques. It should be mentioned here that there are some solutions for measuring ECG using smartphones [16‚Äì18], and these solutions involve additional devices connected to a smartphone via a cable or radio connection. Although these techniques are easy to use, these still require third-party devices and extra cost. When PPG is measured with a smartphone, no external devices and expensive accessories are required. Nowadays, smartphones are widespread and they can be used for various telemonitoring purposes [19]. In this way, we give patients the chance to control their own monitoring and health. The evaluation can be carried out instantly by using new algorithms run by healthcare professionals, which can be accessed from anywhere via the Wi-Fi or 3/4G Internet. During our study, we examined the acceptability of using ‚Äústand-alone‚Äù smartphone-based PRV registration with a PPG technique in clinical settings instead of the complicated ECG-HRV registration. We created smartphone-based software to measure PRV with high quality. Then, an environment was devised to measure PPG and ECG at the same time for the sake of an accurate validation. Our aim was to develop a PRV measurement technique, which is widely available and can replace the ECG-based HRV measurements.
This paper is organized as follows. In Section 2, we give a detailed description of how the parallel ECG and PPG measurements were taken. In the same section, the indices derived from the ECG and PPG signals are deÔ¨Åned, and a commonly used comparison methodology is introduced. In Section 3, we collect our measurement results, and then, we compare the computed PRV and HRV indices using the usual methodology. Afterwards, we introduce an additional validation aspect, which should be taken into consideration in other comparison studies. Essentially, in the previous studies, the PRV was compared with the HRV using just one channel of ECG as the gold standard. However, the HVR indices derived from diÔ¨Äerent ECG channels also show a nonnegligible deviation, and these correspondences among ECG channels are also investigated. The PRV-HRV correspondence is related to the HRV-HRV correspondence. Finally, in Section 4, we draw

Journal of Healthcare Engineering

3

some pertinent conclusions and make some suggestions for future work.
2. Methods and Materials
We will describe the validation methodology, the way that ECG and PPG were recorded in parallel with the intention of having an adequate analysis. Next, we introduce the commonly used HRV parameters, for which the correspondences were investigated in other studies. Then, we describe the comparison methods that are commonly applied to investigate the correspondence between PRV and HRV indices.
The main goal of the study outlined here was to develop a measurement tool that can measure the PRV (pulse rate variability) accurately, and this application can be readily used by a layman. All these requirements can be satisÔ¨Åed using a widely accessible tool called a smartphone like an iPhone 6. There were similar developments in the past, using other types of smartphones [12, 13, 20], but the device and implementation only permitted a low-frequency PPG measurement. The PPG measurement was compared to ECG statistics in that literature, and there was found to be a good correspondence between the HRV (heart rate variability) and PRV parameters. The iPhone 6 smartphone supports a 240-frame-per-second (FPS) video recording, the so-called ‚ÄúSlow-mo‚Äù video, and based on this feature, our plan was to develop a PPG measurement application with a sampling rate of 240 Hz. Another goal of this study was to compare our PRV measurements with those HRV parameters computed from the gold standard ECG signals and also to investigate our comparison results among other experiment results like those of [12, 13, 21]. Because diÔ¨Äerent comparison methodologies were used in diÔ¨Äerent research studies, we collected many of the HRV feature computation and comparison methods for the purpose of a thorough investigation.
Later, we investigate a question raised during our comparison process. If there is more than one ECG channel, which channel should be treated as a gold standard? If the ECG device measures just one channel, then, can that measurement be accepted as a gold standard? If there is diÔ¨Äerence between the statistics calculated from the HRV belonging to diÔ¨Äerent ECG channels, then, the HRV-PRV comparison methodology can also be applied on the diÔ¨Äerent channels of the ECG device. With the results, we should be able to characterize the variability between the channels of the ECG device involved in our investigations. One could compare the PRV-HRV correspondence with the HRV(i)HRV(j) correspondence; however, up till now, we could not Ô¨Ånd a similar approach in other studies. So we think that the ECG should be treated as a gold standard including the variance analysis among the derived values got from the diÔ¨Äerent channels.
The measurements were collected from 50 people. Two signals were recorded in parallel from each, namely, an ECG signal (multiple channels) and a PPG signal. The subjects of the experiments were presumably healthy young or middle-aged people (39 males, 11 females; mean age: 27 years). The length of the recordings made was 5 minutes, whose duration is standard in several medical examinations

[1, 22]. The participants were asked to sit in a relaxed position and not to speak to others while the measurements were being taken to avoid collecting a lot of artifacts.
2.1. Measuring ECG. ECG signals were recorded using a ‚ÄúCardiax PC-ECG‚Äù device. This type of ECG recording device was chosen for several reasons. This device has reusable clamp electrodes, which allow one to record many subjects easily. More importantly, the recorded signal can be easily saved and converted for a further analysis. Many other ECG devices cannot export the recorded data in an appropriate format, the data are stored in a special format, or the data cannot be accessed. The device was connected to the four limbs of the subjects, which allowed us to collect three channels of ECG signals. The sampling frequency of the signals was 500 Hz, and the device Ô¨Åltered the signal with a notch Ô¨Ålter (50 Hz), with a high-pass Ô¨Ålter (0.01 Hz), and with a lowpass Ô¨Ålter (150 Hz).
After collecting the ECG and PPG signals, the same preprocessing steps were performed digitally on all the raw data. Here, we applied a second-order low-pass Butterworth Ô¨Ålter with a cut-oÔ¨Ä frequency of 80 Hz and a second-order highpass Butterworth Ô¨Ålter with a cut-oÔ¨Ä frequency of 1 Hz. These transformations eÔ¨Äectively reduced the noise from high frequencies and slow changes in the signal.
The next step was to Ô¨Ånd the peaks in the signals. For this purpose, Ô¨Årst, a window length was estimated which corresponded to an average RR duration. The estimation was based on Ô¨Ånding the Ô¨Årst local maximum in the autocorrelation function computed on the signal. Then, with a moving window whose size is slightly larger than that of the estimated average RR interval (e.g., multiplied by 1.3), the maxima were collected in each window, and after Ô¨Åltering out the maxima on the borders, the set of peaks was determined. This method worked well, which is demonstrated by the fact that after a human review of the automatically detected peaks, there were no false or missing peaks found. Figure 2 shows the results of the peak Ô¨Ånding method that we applied here.
Although the participants of the experiments were asked to sit in a relaxed position and not to move, some artifacts appeared in each signal, mainly because of movements. This fact is not unique to our study; other researchers have also reported this issue [23, 24]. The usual method for detecting these parts in the signal is to compare all subsequent RR durations with a median duration, and if the absolute diÔ¨Äerence is higher than a threshold, then, that RR interval is dropped and it is skipped in the later computations. The condition for accepting an RR interval during our experiments was that MedRR/1.2 < RR < MedRR ‚àó 1.2, where MedRR is the median of all RRs (durations between subsequent peaks). This method is very similar to the artifact Ô¨Åltering techniques mentioned in other studies [24, 25].
2.2. Measuring PPG. To measure the PPG signal, we decided to use an iPhone 6 smartphone. The procedure was, as in other projects [12, 13, 26], that after switching on the Ô¨Çash, the light would go through a Ô¨Ånger of the subject in question and with the camera nearby, the adsorption of the light could be measured.

4

Journal of Healthcare Engineering

6

4

2

0

‚àí2

‚àí4

5.4

5.5

5.6

5.7

5.8

5.9

6

6.1

Figure 2: Results got from applying our peak detection method to an ECG signal.

The application was developed in the Swift programming language, which initialized the back camera input for the socalled ‚ÄúSlow-mo‚Äù capturing mode (240 Hz, 720 p). A callback method was called when a new image buÔ¨Äer was available with its timestamp, and with this callback method, the PPG signal was computed in real time. In our implementation, the CPU utilization was about 40‚Äì50%, while real-time PPG signal production, analysis, and some GUI feedback (signal plots) for the user were carried out.
From the images of the video signal, the luma component was examined (Y component of the supported 420YpCbCr8BiPlanarFullRange format). In other studies, similar luminosity or brightness data (or just the data of the red channel) were used for computations (in the RGB video recording mode) [27, 28]. It can be seen that these techniques are equivalent, because in the RGB mode, all the blue and green pixel values are zeros and, consequently, all the linear combinations of RGB channels will result in similar curves like those for luminosity. Another technically important fact is that all the automatic functions of the camera can be switched oÔ¨Ä programmatically (like auto-white balance and autoexposure). Here, the level of the Ô¨Çash (‚Äútorch‚Äù) was set to the maximum.
Unlike that for the ECG signal, here, not just data values but their corresponding timestamps were also available. So it may be interesting and important to investigate the spacing between the timestamps; namely, how much one diÔ¨Äers from that of an equally spaced one. Because not just the durations between consecutive peaks (RR or NN intervals) but also their diÔ¨Äerences will be considered here, a large jump in the duration between timestamps could be a source of error. Fortunately, the durations between the consecutive timestamps have a very small variation. The maximum and minimum diÔ¨Äerences between consecutive time intervals are of the order of 1e ‚àí 7, which means that there is a fairly regular time spacing of the video stream signal.
The next preprocessing steps for the PPG signal were the same as those for ECG, namely, those of low-pass Ô¨Åltering, high-pass Ô¨Åltering, peak detection, and Ô¨Åltering out artifacts from the set of RR intervals.

Figure 3: Experimental arrangement. The subject is sitting in a resting position, the electrodes of the ECG device are connected to the limbs, and the smartphone is held in the subject‚Äôs palm.
2.3. Parallel Measurements. Many studies already conÔ¨Årm that HRV and PRV parameters, derived from the series of RR and PP durations, are consistent with each other [10, 12, 13]. Our aim here was to investigate this correspondence, when the PPG signal is obtained from the video stream with high frames per second using an iPhone 6. For the sake of a suitable comparison, parallel measurements were made using a standard ECG device and an iPhone 6 smartphone. Figure 3 shows a typical scenario for this. The application developed for the iPhone was designed so that a measurement begins with a 20-second ‚Äúpractice‚Äù part, during which the subject can locate his/her Ô¨Ånger on the back camera and the Ô¨Çash

Journal of Healthcare Engineering

5

2.4. Analysis of the Signals. There are many medically relevant parameters which can be derived from the RR series. Some of these parameters are statistical properties of the RR time series, while others characterize the frequencydomain features of the RR data. Some values measure statistical properties of the diÔ¨Äerences between consecutive RR durations. Figure 6 shows this delta RR series computed on ECG and PPG signals.
When comparing the RR (PP) series got from ECG and PPG signals, the usual way is to compare the derived HRV (PRV) measures [1, 12]. Since one goal of this study was to compare our results with those of other ECG-PPG comparison studies, we computed the measures described in those studies. We collected the deÔ¨Ånitions of these parameters below (where N is the number of RR durations, RRi is the ith RR duration in ms, Pi is the corresponding pulse value (60,000/RRi), and DRRi = RRi+1 ‚àí RRi). The abbreviations have the following meanings: standard deviation of RR interval time series (SDRR), root mean square of successive diÔ¨Äerences (RMSSD), and probability of the successive diÔ¨Äerences of NN (or RR) intervals which diÔ¨Äer by more than 50 ms (pNN50).

Figure 4: A screenshot of the PPG measurement application during a recording.
appropriately based on feedback (i.e., the Ô¨Åltered PPG signal is shown in real time on the GUI; see Figure 4 for a screenshot). Later, a tone is played, which indicates that the ECG measurement has also to be started. After 5 minutes, a second tone indicates that all the measurements have to be stopped (and the signals must be saved).
When evaluating the parallel measurements, both signals were processed using the methods described above; then, a parallel processing step was performed which attempted to remove from both RR and PP series those values that might correspond to artifacts in at least one of the ECG or PPG signals. For this, after the peaks were detected in both signals, a synchronization step was carried out. Namely, the peak series were paired to each other with a minimal error. Figure 5 shows this synchronization step. The pairing process examined multiple parts taken from both signals to determine the optimal shift value between them, because the artifacts could be anywhere in a signal. Moreover, a time scaling multiplier was calculated, the value of which was very close to 1, since the sampling frequency of the ECG signal was not exactly 500 Hz and the FPS of the video stream was not exactly 240 Hz (actually, it was 239.84 Hz in our experiments).
After this pairing process, RR (and PP) durations corresponding to an artifact in one of the time series were removed. Another Ô¨Ålter was applied that deleted RR and PP durations from both series, if they diÔ¨Äered by more than 0.3 second.

RR

=

1 N

N
„Ä† RRi,
i=1

P

=

1 N

N
„Ä† pi,
i=1

SDRR = std RRi ,

1

RMSSD =

N

1 ‚àí

1

N
„Ä†
i=1

DRR2i ,

pNN50 = P DRRi > 50 ms

The deÔ¨Ånitions of the frequency-domain parameters contain the f(Œª) function, which is the power spectrum of the RR tachogram. The deÔ¨Ånitions of the abbreviations are the following. VLF stands for the power in the very low frequency range, LF represents the power in the low frequency range, and HF means the power in the high frequency range.

0 04 Hz

VLF =

f Œª dŒª,

0 003 Hz

0 15 Hz

LF =

f Œª dŒª,

2

0 04 Hz

0 4 Hz

HF =

f Œª dŒª

0 15 Hz

In other studies, some of these parameters had a different name. For example, SDNN is the same as SDRR and the NN duration or the PP duration is equivalent to the RR duration. In diÔ¨Äerent publications, AVNN (average of NN intervals) corresponds to the average RR (AVRR) or average PP (AVPP).

6

Journal of Healthcare Engineering

6

4

2 0

‚àí1

‚àí2

3500

4000

4500

5000

5500

6000

Figure 5: Illustration of the results of the synchronization process, with the ECG signal shown in blue and the PPG signal shown in red.

0.08 0.06 0.04 0.02
0 ‚àí0.02 ‚àí0.04 ‚àí0.06 ‚àí0.08 ‚àí0.1
0

50

100

150

200

250

300

350

400

Figure 6: Delta RR duration series computed on ECG (blue) and PPG (red) signals.

2.5. Comparison Methods. Two kinds of comparison methodologies are commonly used in the literature. The Ô¨Årst is the Pearson correlation coeÔ¨Écient (given below) with linear
regression parameters computed on the two series [29]:

PC =

„Ä†ni=1 xi ‚àí x yi ‚àí y

3

„Ä†n
i=1

xi ‚àí x

2„Ä†n
i=1

yi ‚àí y

2

Because this correlation value was always close to the one in the experiments, but the diÔ¨Äerences of the PPGand ECG-derived values displayed a clearly visible deviation, a more sophisticated plot and comparison method was introduced, called the Bland-Altman plot and analysis [30, 31]. The mathematical deÔ¨Ånitions of measurement values are the following:

Bias =

1

n
„Ä†

n i=1

yi

‚àí xi

,

SD =

n

1 ‚àí

1

n
„Ä†
i=1

yi ‚àí xi ‚àí Bias

2,

LOA = Bias ¬± 1 96 SD,

4

AL

=

¬±

1

n
„Ä†

yi

+

xi

,

n i=1 2

1 96 SD

BAR =

1/n„Ä†n
i=1

yi

+ xi/2

Here, ‚Äúbias‚Äù means an average shift in the values relating to the reference data (x), and SD denotes the standard

deviation of the diÔ¨Äerences. Limit of agreement (LOA) stands for providing an agreement limit, when the distribution of diÔ¨Äerences is supposed to be a normal distribution. An acceptance limit (AL) is also introduced [12, 32], which is determined by the scale of the values of the reference and the ones examined (here, all the values are positive). The BAR (Bland-Altman ratio) parameter relates SD to AL, and it has been given a meaning [12, 33] that if the value is at most 10%, then, the agreement is ranked as good, and if the value is above, it is moderate (10% < BAR ‚â§ 20%) or insuÔ¨Écient (BAR > 20%).
Since both methods (correlation and Bland-Altman statistics) were used in diÔ¨Äerent reports, we calculated all these statistical values for characterizing our measurements and for the sake of comparing our Ô¨Åndings with those in the other studies.
3. Results and Discussion
Next, we will present our results of all the computed comparison parameters deÔ¨Åned above. These parameters will be computed not just for the PPG-ECG signal pairs but also for the ECG channel pairs. Moreover, Ô¨Ågures will be included to show the linear relationship between the indices and the Bland-Altman plots. Table 1 and the plots (Figures 7 and 8) show our HRV-PRV comparison results.
3.1. Results of Comparisons among ECG Channels. We mentioned previously that when comparing the parameters derived from PPG with those derived from ECG measurements, the ECG signal is treated to be a gold standard. However, a clinically used ECG device has more than one channel,

Journal of Healthcare Engineering

7

Table 1: Comparison values when PRV and HRV indices are compared with each other. Here, PC stands for the Pearson correlation
coeÔ¨Écient (with the P values), m and b represent the coeÔ¨Écients for the linear regression on HRV (PRV) with the corresponding mean error (err), R2 is the coeÔ¨Écient of determination, and bias, SD, and BAR values are the results of the Bland-Altman analysis. The
deÔ¨Ånitions of the HRV indices were introduced earlier.

HR (beat/min) Mean RR(ms) RMSSD (ms) ln(RMSSD) SDNN (ms) pNN50 (%) TP (total power, ms2) LP (lf power, ms2) HP (hf power, ms2) LP + HP LP/HP

PC 1 1 0.996 0.973 0.999 0.993 0.998 0.999 0.995 0.998 0.941

P
<10‚àí23 <10‚àí23 <10‚àí23 <10‚àí23 <10‚àí23 <10‚àí23 <10‚àí23 <10‚àí23 <10‚àí23 <10‚àí23 <10‚àí23

lin. m 1.00 1.00 1.00 0.87 1.01 1.07 1.04 1.04 1.06 1.06 0.68

lin. b ‚àí0.12 ‚àí0.02 2.53 0.528 1.06 1.67 16.52 ‚àí1.14 18.51 13.14 0.341

lin. err (MSE) 0.011 0 3.15 0.017 0.582 4.399 1439.3 86.63 783.9 1124.4 0.326

lin. R2 1 1
0.992 0.947 0.998 0.987 0.997 0.999 0.991 0.996 0.885

Bias 0.032 ‚àí0.002 2.464 0.103 1.271 2.673 50.15 15.96 33.87 49.83 ‚àí0.529

SD 0.110 0.009 1.793 0.153 0.776 2.432 46.05 16.03 33.18 45.21 0.937

BAR <0.001 <0.001 0.106 0.089 0.035 0.306 0.100 0.089 0.246 0.144 0.736

Mean RR (ms)

1200

R2 = 1

1100

1000

900

800

700

RMSSD (ms) 100
R2 = 0.992 80
60
40
20

SDNN (ms) 90
R2 = 0.998 80 70 60 50 40 30 20

pNN50 (%) 70

60

R2 = 0.987

50

40

30

20

10

600

0

600 700 800 900 1000 1100 1200

0

10

0

20 40 60 80 100

0

20

40

60

80

0 0

20

40

60

Ì†µÌªæ = 1x ‚àí 0.19

Ì†µÌªæ = 0.998x + 2.53

Ì†µÌªæ = 1.01x + 1.05

Ì†µÌªæ = 1.07x + 1.67

Total power 3000
R2 = 0.997 2500
2000
1500
1000
500
0

LP (low-frequency power)

1200

R2 = 0.999

1000

800

600

400

200

0

HP (high-frequency power) 1200
R2 = 0.991 1000
800
600
400
200
0

LP/HP 12
R2 = 0.886 10
8
6
4
2
0

0 500 1000 1500 2000 2500 3000 Ì†µÌªæ = 1.04x + 16.52

0 200 400 600 800 1000 1200 Ì†µÌªæ = 1.05x ‚Äì 1.14

0 200 400 600 800 1000 1200 Ì†µÌªæ = 1.06x + 18.51

0246 Ì†µÌªæ = 0.685x + 0.34

8 10 12

Figure 7: Plots of PRV indices related to HRV indices (horizontal axis) with R2 and linear regression.

and the question arises, of which channel should be used as the basis of a comparison process. Moreover, what if, when comparing the HRV indices corresponding to diÔ¨Äerent ECG channels with each other, we have similar properties, like when we compare HRV with PRV?
In the experiments, a Cardiax PC-ECG device was used that had four electrodes connected to the four limbs of the participants. This resulted in three channel data. Figures 9 and 10 show the same plots for the ECG(1)-ECG(2), as those for ECG-PPG (Figures 7 and 8). Figures 11 and 12 and Figures 13 and 14 show these results for the ECG(1)-

ECG(3) and ECG(2)-ECG(3), respectively. Some key values are highlighted in the Ô¨Ågures, and the relevant ones are listed in Table 2 in Discussion.
4. Discussion
Next, we will examine other studies to determine the position of our results relative to these. Furthermore, we will discuss the point that the ECG channels diÔ¨Äer from each other, and this means that in an ECG-PPG comparison, this should be taken into account.

8

Journal of Healthcare Engineering

Mean RR (ms) 200
BAR: 0.00 150 100 50
0 ‚àí50 ‚àí100 ‚àí150

Acc. lim.

8 BAR: 0.10
6

4

2

0 ‚àí0.03
‚àí2

‚àí4

‚àí6

Acc. lim. ‚àí8

600 700 800 900 1000 1100 1200

0

20

RMSSD (ms)
10 Acc. lim. 8
6 4 2 0 ‚àí 2.46 ‚Äì2 ‚Äì4 ‚Äì6 Acc. lim. ‚Äì8 ‚Äì10 40 60 80 100

BAR: 0.04 20

SDNN (ms)

40

60

Acc. lim.

5 BAR: 0.31

pNN50 (%)

0

‚àí 1.27

‚Äì5

Acc. lim. + 2.09
‚àí 2.67 Acc. lim.

Acc. lim. ‚Äì10

‚àí 7.44

80

10 20 30 40 50 60 70

Total power

LP (low-frequency power)

HP (high-frequency power)

200 150 100 50
0 ‚Äì50 ‚Äì100 ‚Äì150 ‚Äì200

BAR: 0.10

Acc. lim. 80 BAR: 0.09 60 40
+40.10 20 0
‚Äì50.15 ‚Äì20

Acc. lim. 50 BAR: 0.25
0 +15.45 ‚Äì15.96 ‚Äì50

Acc. lim. +31.16

5 BAR: 0.74 4

3

‚Äì33.87

2

Acc. lim. 1

‚Äì140.40 ‚Äì40 Acc. lim. ‚Äì60
‚Äì80

‚Äì47.37 ‚Äì100 Acc. lim.

0 ‚Äì98.90
‚Äì1

0 500 1000 1500 2000 2500 3000

0 200 400 600 800 1000 1200

0 200 400 600 800 1000 1200

02

LP/HP
+2.37 + 0.53 Acc. lim. Acc. lim. ‚Äì1.31 4 6 8 10

Figure 8: Bland-Altman plots for PRV and HRV indices with limits of agreement (blue dashed lines), bias (black lines), and acceptance limits (red dotted lines).

Mean RR (ms)

1200 1100

R2 = 1

1000

900

100 R2 = 1
80

RMSSD (ms)

60

90 R2 = 1
80 70 60 50

SDNN (ms)

pNN50 (%) 60
R2 = 0.998 50
40
30

40

40

800

20

30

700

20

20

10

600 600

10 0
0

800

1000

1200

0 20 40 60 80 100

0

20

40

60

80

0 0

40

60

80

Ì†µÌªæ = 1x ‚àí 0.03

Ì†µÌªæ = 1x ‚àí 0.25

Ì†µÌªæ = 1x ‚àí 0.11

Ì†µÌªæ = 0.988x + 0.08

3000 R2 = 1 2500 2000 1500 1000 500

Total power

LP (low-frequency power)

1600 1400

R2 = 1

1200

1000

800

600

400

200

HP (high-frequency power)

1200

R2 = 0.999

1000

800

600

400

200

LP/HP 10
R2 = 0.997 8
6
4
2

0

0

0

0

0

1000

2000

3000

Ì†µÌªæ = 1x ‚àí 3.01

0

500

1000

1500

Ì†µÌªæ = 1x + 0.26

0

500

Ì†µÌªæ = 1x ‚àí 0.94

1000

0

2

4

6

8 10

Ì†µÌªæ = 1.01x ‚àí 0.02

Figure 9: Plots of HRV indices calculated for ECG channel 1 and ECG channel 2 with R2 and linear regression.

4.1. Our Result in Itself. Our results reveal a good correspondence between most indices of HRV and PRV (see Table 1 and Figures 7 and 8). Most of the correlations are above

0.99, and ln(RMSSD) and TP/HP have slightly lower correlation values. What is more, the Bland-Altman analysis also provides good results. The agreement is insuÔ¨Écient

Journal of Healthcare Engineering

9

200 BAR: 0.00

Mean RR (ms)

100

RMSSD (ms)

Acc. lim.

BAR: 0.03 5

10

Acc. lim.

BAR: 0.01

SDNN (ms)

5

0

‚àí0.00

0

+0.13

0

Acc. lim. 4 BAR: 0.12

pNN50 (%)

2
+0.02 0

Acc. lim. +1.79
+0.08

‚àí100

Acc. lim. ‚àí5

600 700 800 900 1000 1100 1200

0

‚àí5
Acc. lim. ‚àí10
20 40 60 80 100

‚àí2 Acc. lim.

‚àí1.62 Acc. lim.

20 40 60 80

0 10 20 30 40 50 60

200 BAR: 0.02

Total power

100

LP (low-frequency power) 100

Acc. lim.

BAR: 0.01

Acc. lim.

50

HP (high-frequency power) 60

BAR: 0.06 40

Acc. lim. 0.6 BAR: 0.08 0.4

20

+15.67 0.2

0

+0.48 0

‚àí100

‚àí200

‚àí50 Acc. lim.

0 500 1000 1500 2000 2500 3000

0

0 ‚àí0.16
‚àí20
‚àí40 Acc. lim.

+0.55

0

‚àí14.57 ‚àí0.2

‚àí0.4

Acc. lim. ‚àí0.6

500

1000

1500

0 200 400 600 800 1000 1200

02

LP/HP 46

Acc. lim.
+0.23 ‚àí0.02 ‚àí0.27 Acc. lim. 8 10

Figure 10: Bland-Altman plots of HRV indices calculated for ECG channel 1 and ECG channel 2 with limits of agreement (blue dashed lines), bias (black lines), and acceptance limits (red dotted lines).

Mean RR (ms)

1200 1100

R2 = 1

1000

900

800

RMSSD (ms) 100
R2 = 0.996 80
60
40

SDNN (ms) 80 R2 = 0.999 60 40

pNN50 (%) 60
R2 = 0.99 50
40
30
20

700

20

20

10

600 600

0 0

800

1000

1200

0 20 40 60 80 100 0

20

40

60

80

0 0

20

40

60

Ì†µÌªæ = 1x + 0.03

Ì†µÌªæ = 0.992x + 0.67

Ì†µÌªæ = 1x + 0.08

Ì†µÌªæ = 0.993x + 0.30

Total power 3000 R2 = 0.999 2500 2000 1500 1000 500
0

LP (low-frequency power) 800
R2 = 0.999 600
400
200
0

HP (high-frequency power) 1200
R2 = 0.997 1000
800
600
400
200
0

R2 = 0.982 10

LP/HP

8

6

4

2

0

0

1000

2000

3000

Ì†µÌªæ = 1.01x ‚àí 2.49

0

200 400 600 800

Ì†µÌªæ = 1x + 0.17

0

500

Ì†µÌªæ = 1.02x ‚àí 0.59

1000

0 2 4 6 8 10

Ì†µÌªæ = 0.937x + 0.08

Figure 11: Plots of HRV indices calculated for ECG channel 1 and ECG channel 3 with R2 and linear regression.

(BAR > 20%) just for pNN50, HP, and HP/LP parameters. The reason for this is the high bias, which is probably due to the inÔ¨Çuence of breathing on the high-frequency PRV components.

4.2. Comparison with Smartphone-Based PRV-HRV Correspondence Measurements. The authors of various studies have reported comparison results between the analyses of ECG and PPG signals. Among these studies, there are a few

10

Journal of Healthcare Engineering

200 BAR: 0.00

Mean RR (ms)

100

Acc. lim. 5 BAR: 0.08

0

‚àí0.01

0

‚àí100

Acc. lim. ‚àí5

600 700 800 900 1000 1100 1200

0

20

RMSSD (ms)

10

Acc. lim.

BAR: 0.02

SDNN (ms)

5

+1.94

‚àí0.43

0

‚àí2.79 ‚àí5

Acc. lim.

4 BAR: 0.25
2

0

‚àí2 ‚àí0.14
‚àí4

‚àí6

pNN50 (%)

+2.98 Acc. lim.
‚àí0.22 Acc. lim. ‚àí3.42

Acc. lim.

Acc. lim. ‚àí8

‚àí10

40 60 80 100

10 20 30 40 50 60 70 80 90

0 10 20 30 40 50 60

Total power

LP (low-frequency power)

HP (high-frequency power)

200 BAR: 0.05

80

Acc. lim.

BAR: 0.03

60

Acc. lim.

60 BAR: 0.13
40

Acc. lim. 1.5 BAR: 0.23

100

40

+37.55 20

0

‚àí5.26

0

‚àí48.07 ‚àí20

20
0 ‚àí1.50
‚àí20

+28.48 1
‚àí3.68 0.5

‚àí100

‚àí40

‚àí200

‚àí60 Acc. lim.
‚àí80

0 500 1000 1500 2000 2500 3000

0

‚àí40 ‚àí60 Acc. lim.

‚àí35.85 0 Acc. lim.
‚àí0.5

200

400

600

800

0 200 400 600 800 1000 1200

02

LP/HP
+0.70 Acc. lim. +0.09 ‚àí0.52 Acc. lim. 4 6 8 10 12

Figure 12: Bland-Altman plots of HRV indices calculated for ECG channel 1 and ECG channel 3 with limits of agreement (blue dashed lines), bias (black lines), and acceptance limits (red dotted lines).

1200 R2 = 1
1100
1000
900
800

Mean RR (ms)

RMSSD (ms) 100
R2 = 0.997 80
60
40

R2 = 1 80

SDNN (ms)

60

40

pNN50 (%) 60
R2 = 0.997 50
40
30
20

700

20

20

10

600 600

0 0

800

1000

1200

0

20 40 60 80 100

0

20

40

60

80

0 0

20

40

60

Ì†µÌªæ = 1x + 0.03

Ì†µÌªæ = 0.985x + 0.87

Ì†µÌªæ = 0.998x + 0.16

Ì†µÌªæ = 0.997x + 0.12

3000 R2 = 1 2500 2000 1500 1000 500
0

Total power

LP (low-frequency power) 800 700 R2 = 1 600 500 400 300 200 100
0

HP (high-frequency power) 1200
R2 = 0.998 1000
800
600
400
200
0

10 R2 = 0.984 8

LP/HP

6

4

2

0

0

1000

2000

3000

0

200

400

600

800

0

500

1000

Ì†µÌªæ = 1x ‚àí 2.03

Ì†µÌªæ = 1x + 0.31

Ì†µÌªæ = 1.01x ‚àí 1.18

0246 Ì†µÌªæ = 0.946x + 0.09

8 10

Figure 13: Plots of HRV indices calculated for ECG channel 2 and ECG channel 3 with R2 and linear regression.

reports that describe measurements of the PPG signal using a smartphone. In a study [12], the authors used an HTC S510e smartphone to take PPG measurements (20‚Äì30 FPS) and a

Finometer MIDI as an ECG data acquisition tool (200 Hz). The number of participants was 30, and the duration of the recordings was at least 5 minutes. They found a perfect

Journal of Healthcare Engineering

11

200 BAR: 0.00

Mean RR (ms)

100

Acc. lim. 6 BAR: 0.07 4 2

0

+0.00 0

‚àí2

‚àí100

‚àí4

Acc. lim. ‚àí6

600 700 800 900 1000 1100 1200

0

20

RMSSD (ms)

10

Acc. lim.

BAR: 0.01

SDNN (ms)

5

Acc. lim.

BAR: 0.17 2

pNN50 (%)

Acc. lim. +1.71

+1.53 ‚àí0.46 0

0 ‚àí0.09

‚àí0.09

‚àí2.44 ‚àí5

‚àí2

‚àí1.89 Acc. lim.

Acc. lim. 40 60 80 100

Acc. lim.

‚àí4

10 20 30 40 50 60 70 80 90

0 10 20 30 40 50 60

200 BAR: 0.03

Total power

Acc. lim.

LP (low-frequency power)

HP (high-frequency power)

BAR: 0.01

Acc. lim. 40 BAR: 0.11

Acc. lim. 1.5 BAR: 0.20

100

50

20

+21.86 1

0 ‚àí100

‚àí1.79

0

‚àí50 Acc. lim.

0 ‚àí0.24
‚àí20
‚àí40
Acc. lim. ‚àí60

‚àí1.49 0.5

‚àí24.84

0

Acc. lim.

‚àí0.5

0 500 1000 1500 2000 2500 3000

0 100 200 300 400 500 600 700 800

0 200 400 600 800 1000 1200

0

2

LP/HP

4

6

+0.70 Acc. lim. +0.08
‚àí0.54 Acc. lim. 8 10

Figure 14: Bland-Altman plots of HRV indices calculated for ECG channel 2 and ECG channel 3 with limits of agreement (blue dashed lines), bias (black lines), and acceptance limits (red dotted lines).

Table 2: HRV and PRV index comparisons can be found in the corresponding literature (in parentheses). PC stands for the Pearson correlation coeÔ¨Écient (with the P values), and bias, SD, and BAR values are the results of the Bland-Altman analysis. The deÔ¨Ånitions of the HRV indices were introduced by us earlier.

Derived index comparison SDNN-PC ([12]) SDNN-BAR ([12]) RMSSD-PC ([12]) RMSSD-BAR ([12]) pNN50-PC ([12]) pNN50-BAR ([12]) LP-PC ([12]) LP-BAR ([12]) HP-PC ([12]) HP-BAR ([12]) LP/HP-PC ([12]) LP/HP-BAR ([12]) avg(PP)-PC ([13]) avg(PP)-bias ([13]) avg(PP)-SD ([13]) ln(RMSSD)-bias ([21]) ln(RMSSD)-SD ([21])

Cited value
0.933 19.17%
0.78 42.22%
0.5 79.91% 0.996 12.14% 0.996 10.22% 0.982 19.3% 0.993 ‚àí0.05 beats/min 1.03 beats/min
0.94 1.77

Our value 0.999 3.5% 0.996 10.6% 0.993 30.6% 0.999 8.9% 0.995 25.6% 0.941 73.6% 1
0.032 beats/min 0.11 beats/min
0.103 0.153

correlation for just the AVNN time-domain parameter, but other correlations between time-domain indices were 0.933, 0.78, and 0.5 for the SDNN, RMSSD, and PNN50 indices,

respectively. Our results for these correlations are 0.999, 0.996, and 0.993, respectively, which are much better results. The linear regression parameters display a much greater difference between the indices than those in our Ô¨Åndings, which are summarized in Table 1. Surprisingly in the frequency domain, their HRV and PRV indices correlate better, but in the case of 5-minute measurements, the VLF power (power in the very low frequency range, 0.003‚Äì0.04 Hz) computation is not very useful (the authors gave this value in their study). The Bland-Altman analysis revealed similar Ô¨Åndings in the time domain (they got worse results than ours) and in the frequency domain, as well. For example, their BAR value for SDNN is 19.17%; for RMSSD, 42.22%; and for PNN50, 79.91%, while our corresponding values are 3.5%, 10.6%, and 30.6%, respectively.
Another study [13] reported an experiment using iPhone 6 for PPG and a 12-lead ECG treadmill (GE Series 2000, GE Medical Systems Information Technologies Inc., Milwaukee, WI, USA) for HR measurements. They compared just the accuracy of heart rate estimates got from the two kinds of signals. In a resting position situation, they found a 0.993 correlation with a mean diÔ¨Äerence of ‚àí0.05 beats/min and a standard deviation of 1.03 beats/min. Our corresponding values for these parameters are 1 for the correlation, 0.032 beats/min for the bias, and 0.11 beats/min for the standard deviation.
In a third experiment [21], 30 participants were involved in measuring their ECG and PPG in parallel, using a Biopac ECG and an iPad2 combined with an infrared pulse sensor (ithlete‚Ñ¢). They compared indices computed from ultrashort-term signals (of approximately one minute in length).

12

Journal of Healthcare Engineering

Table 3: Comparison values for the correspondence values among PRV and HRV indices, when comparing PPG to ECG, and the channels of ECG. Here, PC stands for the Pearson correlation coeÔ¨Écient (with P values smaller than 10‚àí10), m and b represent the coeÔ¨Écients for the linear regression, and bias, SD, and BAR values are for the Bland-Altman analysis. The worst values are in bold.

ECG-PPG

ECG(1)-ECG(2)

ECG(1)-ECG(3)

ECG(2)-ECG(3)

PC

1

1

1

1

Mean RR (ms)

m

1

b

‚àí0.019

Bias

‚àí0.021

SD

0.0093

1 ‚àí0.025 0.0015 0.021

1 0.028 0.007 0.061

1 0.032 ‚àí0.003 0.026

BAR

<0.001

<0.001

<0.001

<0.001

PC

0.996

1

0.998

0.999

RMSSD (ms)

m

0.998

1.004

0.99

0.99

b

2.53

‚àí0.25

0.67

0.87

Bias

2.64

‚àí0.13

0.43

0.46

SD

1.79

0.44

1.21

1.01

BAR

0.104

0.027

0.076

0.07

SDNN (ms)

PC

0.998

m

1.005

b

1.055

Bias

1.27

SD

0.776

BAR

0.035

1 1.002 ‚àí0.113 ‚àí0.020 0.148 0.0068

1 1.001 0.075 0.136 0.464 0.021

1 0.998 0.162 0.092 0.260 0.012

PC

0.993

m

1.07

0.999 0.988

0.995 0.993

0.998 0.997

pNN50 (%)

b

1.67

Bias

2.67

SD

2.43

0.076 ‚àí0.083 0.869

0.305 0.221 1.631

0.122 0.094 0.918

BAR

0.306

0.125

0.250

0.168

TP (total power, ms2)

PC

0.998

m

1.04

b

16.52

Bias

50.15

SD

46.15

BAR

0.10

1 1.003 ‚àí3.01 ‚àí0.484 8.768 0.019

1 1.009 ‚àí2.49 5.261 21.84 0.048

1 1.005 ‚àí2.032 1.788 13.83 0.0335

PC

m

LP (low-frequency power, ms2)

b

Bias

SD

BAR

1 1.05 ‚àí1.14 15.96 16.03 0.089

1 1 0.26 0.16 2.26 0.012

1 1.004 0.167 1.50 5.74 0.033

1 1 0.307 0.243 2.43 0.015

PC

m

HP (high-frequency power, ms2)

b

Bias

SD

BAR

0.995 1.06 18.514 33.87 33.18 0.247

1 1.002 ‚àí0.94 ‚àí0.55 7.71 0.064

0.999 1.017 ‚àí0.586 3.68 16.41 0.13

0.999 1.013 ‚àí1.18 1.49 11.91 0.11

They got a bias of 0.94 and a standard deviation of 1.77 on the ln(RMSSD) index diÔ¨Äerences (when the measurements were
taken in a seated position). These values are higher than ours (0.103, 0.153), which indicate a signiÔ¨Åcantly worse results.

In Table 2, we collected all the data that could be accessed in previous publications on the topic of comparing smart device-based PPG measurements with ECG. The better values are shown in bold.

Journal of Healthcare Engineering

13

Table 4: Bland-Altman SD and BAR values for the ECG-PPG and the worst ECG(i)-ECG(j) correspondences.

ECG-PPG

Worst ECG(i)-ECG(j)

Mean RR (ms)

SD

0.0093

BAR

<0.001

0.061 <0.001

RMSSD (ms)

SD

1.79

BAR

0.104

1.21 0.076

SDNN (ms)

SD

0.776

BAR

0.035

0.464 0.021

pNN50 (%)

SD

2.43

BAR

0.306

1.631 0.250

TP (total power, ms2)

SD

46.15

BAR

0.10

21.84 0.048

LP (low-frequency power, ms2)

SD BAR

16.03 0.089

5.74 0.033

HP (high-frequency power, ms2)

SD BAR

33.18 0.247

16.41 0.13

(1)/(2)
0.15 n/a
1.48 1.37
1.67 1.67
1.49 1.22
2.11 2.08
2.79 2.70
2.02 1.9

In Table 2, the results are an order of magnitude better when our measurements are compared to those in [13] or in [21]. Our results are signiÔ¨Åcantly better compared to those of some important parameters examined in [12], but our high-frequency-domain parameters (HP, LP/HP) are much worse. We do not know the precise reason for this; perhaps, the authors of [12] described a special regulated breathing for the subjects of the experiments. The kind of breathing (spontaneous or regulated) during the experiments can inÔ¨Çuence the high-frequency-domain power spectrum.
4.3. Our Results in Relation to ECG-ECG Correspondence. Another topic in this study was not just to compare the parameters computed from a PPG signal with those computed from an ECG channel but also to investigate those values related to an ECG-to-ECG channel comparison. The results given in the previous sections (Figures 9‚Äì14) tell us that the HRV parameters (or indices) computed via an analysis of an ECG channel diÔ¨Äer from each other for diÔ¨Äerent channels. In our experiments here, the ECG(1)-ECG(2) channel comparison had the lowest standard deviation values on Bland-Altman diÔ¨Äerence plots, and the ECG(1)-ECG(3) diÔ¨Äerences were the highest. In Table 3, we list the correspondences for the most important indices for the ECG-PPG and the three ECG-ECG comparisons.
The results indicate a good agreement for the parameters mean RR, SDNN, TP, and LP. There is a moderate agreement for RMSSD in the PRV-HRV comparison, but the BAR value is not much higher than that for the ECG(1)-ECG(3) comparison. The agreements are insuÔ¨Écient for the PNN50 and HP values (PPG-ECG), but these are also insuÔ¨Écient in the ECG comparisons. In the PPG-ECG comparison, a signiÔ¨Åcant bias was found for some HRV indices, which are not given in ECG(i)-ECG(j) comparisons. This means that PNN50 and the spectral parameters (TP, LP, and HP) are overestimated, especially when the reference values are large. This phenomenon is clearly visible in Figure 8. Other studies also mention this fact (for references, see [9]). In the latter study, the authors oÔ¨Äer an explanation for this observation: ‚ÄúThe fact that spontaneous breathing rates usually

lie within the HF frequency band explains why many studies found that PRV overestimates HRV mostly in the HF domain or in variables reÔ¨Çecting short-term variability (HF, RMSSD, pNN50, etc.).‚Äù
In order to summarize the most important analysis values of the Bland-Altman method, we collected the SD (standard deviation) and BAR (Bland-Altman ratio) values for the various HRV indices corresponding to the ECG(i)-ECG(j) and ECG-PPG comparisons. From the ECG(i)-ECG(j) values, the worst were taken (which are in bold in Table 3). We also computed the ratio of the ECGECG and ECG-PPG values. Table 4 contains data concerning this comparison.
Earlier, we found that there is a signiÔ¨Åcant bias between some ECG- and PPG-based variability indices. Table 4 tells us that for the time-domain indices, the standard deviation of the diÔ¨Äerences (SD) and the Bland-Altman ratio (BAR) corresponding to PPG indices are at most two times higher than those corresponding to ECG. This factor is slightly above two for the frequency-domain indices. We think that this correspondence between the HRV and PRV should sufÔ¨Åce for an application if we wish to collect PRV data from a larger group worldwide.
5. Conclusions
In order to achieve our main goal, one of the Ô¨Årst steps was to compare PRV with HRV. Our results indicate that almost all the indices computed from PRV may be an alternative to those computed from HRV, even for clinical use. This may be concluded from the results of our comparison among the PRV-HRV correspondences and HRV-HRV correspondences. However, there are some indices which show a bias related to the values computed from an HRV analysis (mainly pNN50 and high-frequency power). This phenomenon corresponding to biases was found in other earlier studies as well [9], so one might think that with some direct (possibly) linear transformation or by taking into account the rhythm of breathing, there should be a way to minimize the errors between the two kinds of rate variability indices.

14

Journal of Healthcare Engineering

In the future, we plan to validate PRV measured using a smartphone with HRV involving CAD (coronary artery disease) patients. Moreover, we are interested in whether there is any medical reason which explains the variability among the derived indices computed from diÔ¨Äerent ECG channels. Also a short-term goal of ours is to make our smartphone application free to the public and get as many people involved in data collection as possible.
Conflicts of Interest
The authors declare that there is no conÔ¨Çict of interest regarding the publication of this article.
Acknowledgments
The authors would like to thank G√°bor Sipka and Tibor Szab√≥ for their valuable contribution on the development of the previous version of this method. They are also grateful to Professors Ferenc Bari, Ph.D., D.Sc, and J√≥zsef Tolnai, Ph.D., for their support and for the Cardiax ECG device. This project GINOP-2.2.1-15-2017-00073 (Tigra) was supported by the European Union and coÔ¨Ånanced by the European Regional Development Fund.
References
[1] Task Force of The European Society of Cardiology and The North American Society of Pacing and Electrophysiology, ‚ÄúHeart rate variability: standards of measurement, physiological interpretation, and clinical use,‚Äù European Heart Journal, vol. 17, no. 3, pp. 354‚Äì381, 1996.
[2] R. Sassi, S. Cerutti, F. Lombardi et al., ‚ÄúAdvances in heart rate variability signal analysis: joint position statement by the e-Cardiology ESC Working Group and the European Heart Rhythm Association co-endorsed by the Asia PaciÔ¨Åc Heart Rhythm Society,‚Äù EP Europace, vol. 17, no. 9, pp. 1341‚Äì1353, 2015.
[3] W. H. Organization, World Health Statistics 2016: Monitoring Health for the SDGs Sustainable Development Goals, World Health Organization, Geneva, Switzerland, 2016.
[4] K. C. Bilchick and R. D. Berger, ‚ÄúHeart rate variability,‚Äù Journal of Cardiovascular Electrophysiology, vol. 17, no. 6, pp. 691‚Äì694, 2006.
[5] M. Sosnowski, E. Clark, S. Latif, P. W. Macfarlane, and M. Tendera, ‚ÄúHeart rate variability fraction‚Äîa new reportable measure of 24-hour R-R interval variation,‚Äù Annals of Noninvasive Electrocardiology, vol. 10, no. 1, pp. 7‚Äì15, 2005.
[6] B. Francesco, B. Maria Grazia, G. Emanuele et al., ‚ÄúLinear and nonlinear heart rate variability indexes in clinical practice,‚Äù Computational and Mathematical Methods in Medicine, vol. 2012, pp. 1‚Äì5, 2012.
[7] J. Bolea, E. Pueyo, M. Orini, and R. Bail√≥n, ‚ÄúInÔ¨Çuence of heart rate in non-linear HRV indices as a sampling rate eÔ¨Äect evaluated on supine and standing,‚Äù Frontiers in Physiology, vol. 7, 2016.
[8] A. K. F. da Silva, D. G. D. Christofaro, A. F. B. Bernardo, F. M. Vanderlei, and L. C. M. Vanderlei, ‚ÄúSensitivity, speciÔ¨Åcity and predictive value of heart rate variability indices in type 1 diabetes mellitus,‚Äù Arquivos Brasileiros de Cardiologia, vol. 108, no. 3, pp. 255‚Äì262, 2017.

[9] A. Sch√§fer and J. Vagedes, ‚ÄúHow accurate is pulse rate variability as an estimate of heart rate variability? A review on studies comparing photoplethysmographic technology with an electrocardiogram,‚Äù International Journal of Cardiology, vol. 166, no. 1, pp. 15‚Äì29, 2013.
[10] V. Jeyhani, S. Mahdiani, M. Peltokangas, and A. Vehkaoja, ‚ÄúComparison of HRV parameters derived from photoplethysmography and electrocardiography signals,‚Äù in 2015 37th Annual International Conference of the IEEE Engineering in Medicine and Biology Society (EMBC), pp. 5952‚Äì5955, Milan, Italy, 2015.
[11] G. Leikan, E. Rossi, M. Sanz et al., ‚ÄúEvaluation of agreement between temporal series obtained from electrocardiogram and pulse wave,‚Äù Journal of Physics: Conference Series, vol. 705, article 012038, 2016.
[12] R.-C. Peng, X.-L. Zhou, W.-H. Lin, and Y.-T. Zhang, ‚ÄúExtraction of heart rate variability from smartphone photoplethysmograms,‚Äù Computational and Mathematical Methods in Medicine, vol. 2015, Article ID 516826, 11 pages, 2015.
[13] B. P. Yan, C. K. Chan, C. K. Li et al., ‚ÄúResting and postexercise heart rate detection from Ô¨Ångertip and facial photoplethysmography using a smartphone camera: a validation study,‚Äù JMIR mHealth and uHealth, vol. 5, no. 3, article e33, 2017.
[14] T. Nagy and Z. Gingl, ‚ÄúLow-cost photoplethysmograph solutions using the Raspberry Pi,‚Äù in 2013 IEEE 14th International Symposium on Computational Intelligence and Informatics (CINTI), pp. 163‚Äì167, Budapest, Hungary, 19 November 2013.
[15] S. Bagha and L. Shaw, ‚ÄúA real time analysis of PPG signal for measurement of SpO2 and pulse rate,‚Äù International Journal of Computer Applications, vol. 36, no. 11, pp. 45‚Äì50, 2011.
[16] C. D. Galloway, D. E. Albert, and S. B. Freedman, ‚ÄúiPhone ECG application for community screening to detect silent atrial Ô¨Åbrillation: a novel technology to prevent stroke,‚Äù International Journal of Cardiology, vol. 165, pp. 193-194, 2013.
[17] J. B. Muhlestein, V. Le, D. Albert et al., ‚ÄúSmartphone ECG for evaluation of STEMI: results of the ST LEUIS Pilot Study,‚Äù Journal of Electrocardiology, vol. 48, no. 2, pp. 249‚Äì 259, 2015.
[18] L. Desteghe, Z. Raymaekers, M. Lutin et al., ‚ÄúPerformance of handheld electrocardiogram devices to detect atrial Ô¨Åbrillation in a cardiology and geriatric ward setting,‚Äù EP Europace, vol. 19, no. 1, pp. 29‚Äì39, 2016.
[19] M. Kay, J. Santos, and M. Takane, ‚ÄúmHealth: new horizons for health through mobile technologies,‚Äù World Health Organization, Geneva, Switzerland, 2011.
[20] J. A. Heathers, ‚ÄúSmartphone-enabled pulse rate variability: an alternative methodology for the collection of heart rate variability in psychophysiological research,‚Äù International Journal of Psychophysiology, vol. 89, no. 3, pp. 297‚Äì304, 2013.
[21] M. R. Esco, A. A. Flatt, and F. Y. Nakamura, ‚ÄúAgreement between a smartphone pulse sensor application and electrocardiography for determining lnRMSSD,‚Äù Journal of Strength and Conditioning Research, vol. 31, no. 2, pp. 1‚Äì385, 2017.
[22] G. H. Lin, Y. H. Chang, and K. P. Lin, ‚ÄúComparison of heart rate variability measured by ECG in diÔ¨Äerent signal lengths,‚Äù Journal of Medical and Biological Engineering, vol. 25, no. 2, pp. 67‚Äì71, 2005.
[23] M. A. Peltola, ‚ÄúRole of editing of R‚ÄìR intervals in the analysis of heart rate variability,‚Äù Frontiers in Physiology, vol. 3, 2012.
[24] C. A. G. Mart√≠nez, A. O. Quintana, X. A. Vila et al., ‚ÄúLoading, plotting, and Ô¨Åltering RR intervals,‚Äù in Heart Rate Variability

Journal of Healthcare Engineering

15

Analysis with the R Package RHRV. Use R!, pp. 15‚Äì28, Springer, Cham, 2017.
[25] G. D. CliÔ¨Äord, Signal processing methods for heart rate variability, [Ph.D. thesis], University of Oxford, 2002.
[26] L. Drijkoningen, F. Lenaerts, J. Van der Auwera et al., ‚ÄúValidation of a smartphone based photoplethysmographic beat detection algorithm for normal and ectopic complexes,‚Äù in Computing in Cardiology 2014, pp. 845‚Äì848, Cambridge, MA, USA, 2014.
[27] K. Matsumura, P. Rolfe, J. Lee, and T. Yamakoshi, ‚ÄúiPhone 4s photoplethysmography: which light color yields the most accurate heart rate and normalized pulse volume using the iPhysioMeter application in the presence of motion artifact?,‚Äù PLoS One, vol. 9, no. 3, article e91205, 2014.
[28] S. A. Siddiqui, Y. Zhang, Z. Feng, and A. Kos, ‚ÄúA pulse rate estimation algorithm using PPG and smartphone camera,‚Äù Journal of Medical Systems, vol. 40, no. 5, p. 126, 2016.
[29] M. Mukaka, ‚ÄúA guide to appropriate use of correlation coeÔ¨Écient in medical research,‚Äù Malawi Medical Journal, vol. 24, no. 3, pp. 69‚Äì71, 2012.
[30] J. M. Bland and D. G. Altman, ‚ÄúStatistical methods for assessing agreement between two methods of clinical measurement,‚Äù The Lancet, vol. 327, no. 8476, pp. 307‚Äì310, 1986.
[31] D. Giavarina, ‚ÄúUnderstanding Bland Altman analysis,‚Äù Biochemia medica, vol. 25, no. 2, pp. 141‚Äì151, 2015.
[32] P. S. Myles and J. Cui, ‚ÄúI. using the Bland‚ÄìAltman method to measure agreement with repeated measures,‚Äù British Journal of Anaesthesia, vol. 99, no. 3, pp. 309‚Äì311, 2007.
[33] D. St√∂ckl, D. R. Cabaleiro, K. V. Uytfanghe, and L. M. Thienpont, ‚ÄúInterpreting method comparison studies by use of the Bland‚ÄìAltman plot: reÔ¨Çecting the importance of sample size by incorporating conÔ¨Ådence limits and predeÔ¨Åned error limits in the graphic,‚Äù Clinical Chemistry, vol. 50, no. 11, pp. 2216‚Äì2218, 2004.

International Journal of
Rotating Machinery

Advances in
Multimedia

Engineering Journal of

Hindawi www.hindawi.com

Volume 2018

The Scientific World Journal

Hindawi Publishing Corporation hwtwtpw:/./hwinwdwaw.hii.ncodmawi.com

Volume 20183

Hindawi www.hindawi.com

Volume 2018

Journal of
Sensors
Hindawi www.hindawi.com

Volume 2018

Hindawi www.hindawi.com

Volume 2018

Journal of
Control Science and Engineering

Advances in
Civil Engineering

Hindawi www.hindawi.com

Volume 2018

Hindawi www.hindawi.com

Volume 2018

Journal of
Robotics
Hindawi www.hindawi.com

Volume 2018

Submit your manuscripts at www.hindawi.com

Journal of
Electrical and Computer Engineering

Hindawi www.hindawi.com

Volume 2018

Advances in OptoElectronics

Hindawi www.hindawi.com

Volume 2018

VLSI Design

Hindawi www.hindawi.com

Volume 2018

International Journal of
Navigation and Observation

Hindawi www.hindawi.com

Volume 2018

Modelling & Simulation in Engineering

Hindawi www.hindawi.com

Volume 2018

International Journal of
Aerospace Engineering

Hindawi www.hindawi.com

Volume 2018

International Journal of
Chemical Engineering

Hindawi www.hindawi.com

Volume 2018

International Journal of
Antennas and Propagation

Hindawi www.hindawi.com

Volume 2018

Active and Passive Electronic Components

Hindawi www.hindawi.com

Volume 2018

Shock and Vibration

Hindawi www.hindawi.com

Volume 2018

Advances in
Acoustics and Vibration

Hindawi www.hindawi.com

Volume 2018

