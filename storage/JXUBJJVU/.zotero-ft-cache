See discussions, stats, and author profiles for this publication at: https://www.researchgate.net/publication/320174298
Continuous heart rate monitoring using smartphone
Conference Paper · May 2017
DOI: 10.1109/EIT.2017.8053379

CITATION
1
4 authors, including:
Tareq Hasan Khan Eastern Michigan University 47 PUBLICATIONS 218 CITATIONS
SEE PROFILE

READS
716
Kumar Yelamarthi Central Michigan University 86 PUBLICATIONS 352 CITATIONS
SEE PROFILE

Some of the authors of this publication are also working on these related projects: IoT Modular Architecture View project Image compression algorithm for wireless capsule endoscopy View project

All content following this page was uploaded by Kumar Yelamarthi on 05 April 2018.
The user has requested enhancement of the downloaded file.

A Smartphone based Continuous Heart Rate Monitoring System
Justin Turner, Chase Zellner, Tareq Khan, and Kumar Yelamarthi
Department of Electrical and Computer Engineering, Central Michigan University, Mount Pleasant, MI, USA
{turne3jm, zelln1cf, khan2t, yelam1k}@cmich.edu

Abstract— Health monitoring is an important aspect of everyday life for many people. In this study, the design of a heart rate monitor with Bluetooth connectivity is discussed. The AD8232 Single Lead, Heart Rate Monitor is the centerpiece of the design. The output of this monitor is an analog output, so an analog-to-digital converter is used on the Dragon12-Plus2 board. Data is wirelessly transferred to smartphone using Bluetooth. The data received from the monitor is analyzed to determine a heart rate in beats per minute. MIT App Inventor 2 is used to design the app to display the heart rate on Smartphone.
Keywords—heart rate; microcontroller, Bluetooth, smartphone.

heart rate over time and cannot diagnose any cardiovascular diseases like the aforementioned paper.
III. SYSTEM ARCHITECTURE
A. Hardware The overall diagram of the hardware is shown in the
Appendix in Fig. 1. The design consists of a microcontroller (MCU), AD8232 Heart Monitor, three-lead electrode pads, HC-06 Bluetooth module, and a 0.1 μF capacitor.

I. INTRODUCTION
Electrocardiography (ECG) is an important tool in the world today. It can be used for medical diagnosis or help athletes train and perform better. By detecting tiny changes in voltage produced by the heart muscle, an ECG can accurately depict how the heart is functioning. By continuously monitoring the heart rate, valuable information can be obtained, and used to protect and support the heart. The system described in this paper can detect the heartbeat of an individual and send that information to the user’s smartphone, where the user can then determine what action needs to be taken whether the user is a patient with a heart condition or an athlete trying to get the most out of workout.

II. RELATED WORK
There are many smartphone-based heart rate monitors, like the one described by Gregoski et al. [1]. Their system uses the light and camera of a smartphone to detect blood flow to a finger and can measure the heart rate based on the blood flow. This is a very good design, but not practical if continuous heart monitoring is necessary. This paper describes and embedded system that can wirelessly transmit the heartbeat of an individual to a smartphone, allowing the user to check his or her heart rate by just looking at their phone instead of having to use their phone to measure it every time.
Another report authored by Oresko et al. [2] describes a fully wireless smartphone-based cardiovascular disease detection system that describes a device that, given enough time and monetary resources, the system described in this paper would strive to be like. Unfortunately, due to time limitations, this system only monitors heartbeat in real time, it does not track

Fig. 1 Hardware diagram
1) Microcontroller The microcontroller unit chosen for this design was the MC9S12DT128B. It is a 16-bit device composed of standard on-chip peripherals. This chip is programed in C language, and one analog-digital converter is used.
2) AD8232 Heart Rate Monitor The AD8232 is an integrated signal conditioning block for ECG and other biopotential measurement applications. It is designed to extract, amplify, and filter small biopotential signals in the presence of noisy conditions, such as those created by motion or remote electrode placement. This design allows for an ultralow power analog-to-digital converter (ADC) or an embedded microcontroller to acquire the output signal easily. The functional block diagram of the integrated circuit is shown in Fig. 2.

Fig. 2: Functional block diagram of AD8232
3) Electrode Pads The pads used are three conductor sensor cables with electrode pad leads. These cables are 24" long and feature a 3.5mm audio jack connector on one end with snap style receptacles for biomedical sensor pads. Each cable comes in a red/blue/black set.
4) HC-06 Bluetooth Module This module is used to communicate with the app that is created. The module will receive a command to start the C program on the Dragonboard. Data will also be sent from the MCU to the app through the bluetooth module.

Fig. 3 : Program flowchart

B. Microcontroller Firmware
The microcontroller was programmed using the ASM IDE. Serial communication was initialized along a timer. The main function gets the voltage reading from the AD8232. A threshold of 100 was set so only the main heartbeat is detected and noise and other waves of the heart are filtered out and not counted in the heartbeat. Each time the value is above 100, a counter is incremented. After the timer counts 10 seconds, the heartbeat counter is multiplied by 6 to get the beats per minute and then set back to zero to begin counting again. The beats per minute is then sent to the Bluetooth module through the serial port of the microcontroller. The Bluetooth module then sends the number to the smartphone app where the user is able to read the value. The program flowchart is shown in Fig. 3.
C. Smartphone App
The application was designed using MIT App Inventor 2. The app starts by selecting which Bluetooth module should be connected. Once it is a connected a button will appear to start reading the data from the heart rate monitor. After 10 seconds passes the app will pull data for the heart rate from the Dragon board and display it on the screen. Fig. 4 is the code for the phone application.

Fig. 4: Smartphone App
IV. RESULTS
Our program and app worked as expected. A picture of the microcontroller setup is shown in Fig. 5. The raw data received from the AD8232 Heart Rate Monitor can be found graphed in Fig. 6. The app interface is shown in Fig. 7. There is a button that allows the app to connect to the Bluetooth module and a button that begins reading the heart rate. Overall, the project works well and accomplishes all goals set forth by our design. One major flaw with our system is the accuracy of the heart rate. First, the sensor we used produces a lot of noise since it can detect electrical changes due to muscle movements as well so even breathing can cause inaccurate measurements. Second, since the program only runs for 10 seconds and then multiplies

the heart rate by 6, this can cause an inaccurate heart rate. To decrease this inaccuracy, the heart rate would have to be measured for a longer time (30 seconds, 60 seconds etc.) and multiplied properly (if needed). The reason we chose this method was to get an updated heart rate every 10 seconds to show that it works and did not have to wait a full minute for the system to update.

TABLE I.

POWER CONSUMPTION AND COMPONENTS PRICE

Device

Power Consumption
(mW)

Price (USD)

Dragon12

500

MCU

$179.00

AD8232 HR

21

Sensor

$19.95

HC-06 BT

82.5

Module

$5.99

Total

603.5

$204.94

Fig. 5. Photograph of microcontroller with AD8232 on top right of breadboard and HC-06 on top left of breadboard
Fig. 6. Raw data received from heart monitor

Table 1 shows a breakdown of components used, power consumption and price. The total time it took to complete this project was 10-12 hours. It took around 2 hours to research all the components, 4 hours to write the code, 3 hours to build the app, and 3 hours to troubleshoot and test the final design. Work was completed together as a team.
One of the main ethical concerns with this project is security. Security issues are an implicit concern with any Internet of Things (IoT) device. Since Bluetooth is used, the concern is anyone can connect to the monitor and use personal information. Even if the information seems fairly mundane, it can be important to some people who would like the information to stay away from people they do not know. However, if security concerns can be alleviated, this device can prove to be lifesaving to many people and may help prevent illness by catching diseases early.

V. CONCLUSION
In this project a heart rate monitor for continuous heart monitoring is developed. The data received from the monitor is converted using an ADC on the Dragon board. The design is easily controlled by the use of a smartphone application. Overall this was a project that was fun yet challenging. While this is not the best design, with access to more advanced products, this project could work more efficiently.

Fig. 7. App showing heart rate of 108 beats/minute

REFERENCES
[1] Gregoski, Mathew J. et al, “Development and Validation of a Smartphone Heart Rate Acquisition Application for Health Promotion and Wellness Telehealth Applications.,” International Journal of Telemedicine and Applications, Volume 2012 (2012), Article ID 696324.
[2] Oresko, Joseph J. "A Wearable Smartphone-Based Platform for RealTime Cardiovascular Disease Detection Via Electrocardiogram Processing." IEEE Transactions on Information Technology in Biomedicine, vol. 4, issue. 3, pp. 734-740, 2010.
[3] Single-Lead, Heart Rate Monitor Front End, AD8232 Datasheet. 2017. [Online]. Available: http://www.analog.com/media/en/technicaldocumentation/data-sheets/AD8232.pdf.

View publication stats

