"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}!function(){angular.module("templates.xpl.document",[]).run(["$anchorScroll",function($anchorScroll){$anchorScroll.yOffset=100}]),angular.module("xpl.document",["xpl","xpl.product","xpl.search","templates.xpl.document"]).config(["$httpProvider","$locationProvider",function($httpProvider,$locationProvider){$locationProvider.html5Mode(!0).hashPrefix("!"),$httpProvider.defaults.cache=!1,$httpProvider.defaults.headers.get||($httpProvider.defaults.headers.get={}),$httpProvider.defaults.headers.get["If-Modified-Since"]="0"}]),angular.module("xpl.document").filter("sanitize",["$sce",function($sce){return function(htmlCode){return $sce.trustAsHtml(htmlCode)}}])}(),function(){function accordionService(){var selectedElem={section:""},accordionService={selectedElem:selectedElem};return accordionService}angular.module("xpl.document").factory("accordionService",accordionService)}(),function(){function docCustomDenialMsgService(publisherConstants,docLinksConstants){function getCustomDenialMsg(publisher,doi,isGeneric){return'\n\t\t\t\t<div>\n\t\t\t\t\t<div class="strong">'+getCustomDenialMsgStart(publisher)+"</div>\n\t\t\t\t\t"+generateMsgListHtml(publisher,doi,isGeneric)+"\n\t\t\t\t</div>\n\t\t\t"}function getCustomDenialMsgStart(publisher){return MSG_START_DEFAULT}function generateMsgListHtml(publisher,doi,isGeneric){return'\n\t\t\t\t<ul class="doc-denial-msg-list">\n\t\t\t\t\t'+generateListItemsHtml(publisher,doi,isGeneric)+"\n\t\t\t\t</ul>\n\t\t\t"}function generateListItemsHtml(publisher,doi,isGeneric){if(isGeneric)return DEFAULT_LIST_ITEMS;var publisherLink='<a href="'+(docLinksConstants.DOI_LINK_PREFIX+doi)+'" target="_blank">publisher\'s website</a>',publisherItem="<li>Check to see if you have access via the "+publisherLink+"</li>",itemsMap=_defineProperty({},publisherConstants.OUP,publisherItem+LIST_ITEM_TECH),mappedPublisherItems=itemsMap[publisher];return mappedPublisherItems?mappedPublisherItems:DEFAULT_LIST_ITEMS}var LINK_TECH="/xpl/techform.jsp",MSG_START_DEFAULT="This document is outside of your subscription. For access:",LIST_ITEM_TECH='<li>Contact the <a href="'+LINK_TECH+'">IEEE Customer Center</a></li>',LIST_ITEM_PURCHASE="<li>Purchase the document</li>",DEFAULT_LIST_ITEMS=LIST_ITEM_TECH+LIST_ITEM_PURCHASE,customDenialMsgService={getCustomDenialMsg:getCustomDenialMsg};return customDenialMsgService}angular.module("xpl.document").factory("docCustomDenialMsgService",docCustomDenialMsgService),docCustomDenialMsgService.$inject=["publisherConstants","docLinksConstants"]}(),function(){function xplCmptDocument(){return{controller:DocumentComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-component.html",transclude:!0}}function DocumentComponent($location,$log,$rootScope,$scope,$state,$window,docCustomDenialMsgService,documentConstants,documentService,docLinksConstants,googleAdTargetingService,layoutConstants,responsivenessService,sipModalConstants,userService,utilsService,tealiumService,accordionService){function initialize(){vm.section=$state.params.section,vm.currentPart=$state.params.part,vm.showFullText="document.figures"!==$state.current.name,documentService.getDocument($state.params.id).then(getDocumentSuccess)["catch"](catchPromiseFailure),documentService.getDocumentRelatedArticles($state.params.id).then(getDocumentRelatedArticlesSuccess)["catch"](catchPromiseFailure),$scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams,options){vm.showFullText="document.figures"!==toState.name,fromState.name==toState.name&&fromParams.section!=toParams.section&&(event.preventDefault(),$state.go($state.current.name,{section:toParams.section},{notify:!1}),$rootScope.stateIsLoading=!1,$state.params.section=toParams.section,$scope.$broadcast(documentConstants.events.sectionChanged))}),tealiumCall()}function tealiumCall(){if(tealiumService.isTealiumEnabled());}function breadCrumbPubTitle(){var ptitle=vm.document.displayPublicationTitle;return void 0!==ptitle&&(ptitle=ptitle.length>30?ptitle.substring(0,29)+"...":ptitle),ptitle}function getKeywordsForMetaTag(){var keyWordString="";return vm.document.keywords&&(keyWordString=utilsService.flattenArrayObject(vm.document.keywords,["kwd"]).join(";")),keyWordString}function viewDocument(){return!vm.document.pdfUrl&&vm.document.doi?($window.open(docLinksConstants.DOI_LINK_PREFIX+vm.document.doi),!1):vm.snippet?($window.location="/document/"+vm.document.articleNumber+"/#full-text-section",!1):responsivenessService.isMobile()?(utilsService.scrollTo("#"+layoutConstants.documentContentIdName,0),!1):void utilsService.scrollTo("#full-text-section",80)}function showACMContent(link,title){if(link){var w=600,h=400,left=screen.width/2-w/2,top=screen.height/2-h/2;$window.open(link,title,"location=no,toolbar=no,directories=no,status=no, menubar=no,scrollbars=yes,resizable=yes,top="+top+"px,left="+left+"px,width="+w+"px,height="+h+"px")}}function scrollToDisqus(){utilsService.scrollTo("#"+vm.disqusContainerId,0)}function scrollToAnchor(anchor,offset){anchor="string"==typeof anchor?anchor:"",offset="number"==typeof offset?offset:0,utilsService.scrollTo(anchor,offset)}function expandSection(id){accordionService.selectedElem.section=id,$rootScope.$broadcast(documentConstants.events.resetFullTextRightRailScroll),$rootScope.$broadcast(documentConstants.events.resetFullTextHeaderScroll)}function expandDefinitions(tabName){"definitions"===tabName&&(accordionService.selectedElem.section=tabName,$rootScope.$broadcast(documentConstants.events.resetFullTextRightRailScroll),$rootScope.$broadcast(documentConstants.events.resetFullTextHeaderScroll))}function toggleDocHeaderAsideMobile(){vm.isDocHeaderAsideOpened=!vm.isDocHeaderAsideOpened}function viewMoreTabs(){vm.viewMoreTabsExpanded=!vm.viewMoreTabsExpanded}function getDocumentSuccess(data){if(userService.setUser(data.userInfo),vm.document=data,initCommenting(),vm.user=userService.getUser(),vm.document.isStandard?setStandardTitle():vm.displayDocTitle=vm.document.title,vm.authors=vm.document.authors,setBrowseLink(),setVisibleTabs(),"LICENSE"===vm.document.denialReason&&(vm.document.denialMessage=null),!vm.document.fullTextAccess&&vm.document.userInfo){var isUserLoggedIn=vm.document.userInfo.institute||vm.document.userInfo.member||vm.document.userInfo.individual||vm.document.userInfo.guest,isValidCustomDenialScenario="LICENSE"===vm.document.denialReason||vm.document.applyOUPFilter,showCustomDenial=isUserLoggedIn&&isValidCustomDenialScenario&&vm.document.isCustomDenial;showCustomDenial&&(vm.document.denialMessage=docCustomDenialMsgService.getCustomDenialMsg(vm.document.publisher,vm.document.doi,!vm.document.applyOUPFilter))}setHelpText(vm.document.isConference,vm.document.isStandard),vm.showAd=$window.noAdBlocker&&!vm.document.userInfo.institute&&!vm.document.userInfo.individual,vm.googleAdTargeting=getGoogleAdTargetingInfo(),setTealiumDataObject(),vm.loading=!1}function getDocumentRelatedArticlesSuccess(data){vm.loadingRelated=!1,vm.relatedArticles=data.similar}function catchPromiseFailure(error){$log.error(error),vm.error=!0,vm.loading=!1}function setVisibleTabs(){var contentType=vm.document.contentType,tabList=[];documentConstants.tabs.forEach(function(value){var showBasedOnContentType=!value.hideForContent||value.hideForContent.indexOf(contentType)==-1,showBasedOnAvailableData=!value.hideIfUndefined||angular.isDefined(getChildProperty(vm,value.hideIfUndefined));showBasedOnContentType&&showBasedOnAvailableData&&tabList.push(value)}),vm.tabs=tabList}function getChildProperty(parentObj,properties){return properties.split(".").reduce(function(obj,property){return obj[property]},parentObj)}function setBrowseLink(){if(!vm.document.applyOUPFilter){var browseBreadcrumbs=[],contentType=documentConstants.contentTypeDisplay[vm.document.contentType];switch(contentType){case documentConstants.contentTypeDisplay.standards:browseBreadcrumbs.push({display:"Browse  "+documentConstants.contentTypeDisplay.standards,browseLink:"/browse/"+vm.document.contentType+"/collection/ieee"});break;case documentConstants.contentTypeDisplay.periodicals:browseBreadcrumbs.push({display:"Browse  "+documentConstants.contentTypeDisplay.periodicals,browseLink:"/browse/"+vm.document.contentType+"/title/",separator:" >"}),browseBreadcrumbs.push({display:vm.breadCrumbPubTitle(),browseLink:vm.document.pubLink,separator:" >"});var obj={display:"Volume: "+vm.document.volume,browseLink:vm.document.issueLink};vm.document.isEarlyAccess?obj.display="Early Access":vm.document.issue&&(obj.display+=" Issue: "+vm.document.issue),browseBreadcrumbs.push(obj);break;case documentConstants.contentTypeDisplay.preprints:browseBreadcrumbs.push({display:"Browse  "+documentConstants.contentTypeDisplay.periodicals,browseLink:"/browse/"+documentConstants.contentTypes.periodicals+"/title/",separator:" >"}),browseBreadcrumbs.push({display:vm.breadCrumbPubTitle(),browseLink:vm.document.pubLink,separator:" >"}),browseBreadcrumbs.push({display:documentConstants.contentTypeDisplay.preprints,browseLink:vm.document.issueLink});break;case documentConstants.contentTypeDisplay.conferences:browseBreadcrumbs.push({display:"Browse  "+documentConstants.contentTypeDisplay.conferences,browseLink:"/browse/"+vm.document.contentType+"/title/",separator:" >"}),browseBreadcrumbs.push({display:vm.breadCrumbPubTitle(),browseLink:vm.document.pubLink})}vm.browseBreadcrumbs=browseBreadcrumbs}}function setStandardTitle(){vm.displayDocTitle=vm.document.standardTitle,vm.document.standardTitle&&vm.document.standardTitle.indexOf("- Redline")>-1&&(vm.titleContainsRedline=!0,vm.displayDocTitle=vm.displayDocTitle.replace("- Redline",""))}function initCommenting(){vm.document.allowComments&&(vm.disqusConfig={disqus_shortname:global.document.disqus.short_name,disqus_identifier:vm.document.articleId,disqus_url:global.document.disqus.client_url+"/document/"+vm.document.articleId,disqus_title:vm.document.title,disqus_remote_auth_s3:global.document.disqus.remote_auth_s3,disqus_api_key:global.document.disqus.public_api_key},global.document.disqus.sso_enabled&&(vm.disqusConfig.disqus_sso={name:"IEEE Account",button:"https://ieeexplore.ieee.org/assets/img/IEEE_Logo_Full.png",icon:"https://ieeexplore.ieee.org/favicon.ico",url:global.document.disqus.client_url+"/xpl/popupSignIn.jsp",logout:"/servlet/Login?logout=/Xplore/guesthome.jsp",width:"800px",height:"800px"}))}function setHelpText(isConference,isStandard){return isConference?vm.helpText="Get help using Conference documents":isStandard&&(vm.helpText="Get help using Standards documents"),!1}function getGoogleAdTargetingInfo(){var user=userService.getUser(),search=googleAdTargetingService.getSearchArrayFromDocument(vm.document["abstract"],vm.document.keywords),puNumber=vm.document.publicationNumber?vm.document.publicationNumber:"",contentId=googleAdTargetingService.getContentIdFromContentType(vm.document.contentType),publisher=vm.document.publisher?vm.document.publisher:"";return googleAdTargetingService.getTargetingInfo(user,search,puNumber,contentId,publisher)}function setTealiumDataObject(){vm.tealiumDataObject=JSON.stringify({isGetArticle:vm.document.isGetArticle,gpAcceptTerms:!!vm.user.gpAcceptTerms})}var vm=this;vm.error=!1,vm.loading=!0,vm.loadingRelated=!0,vm.document={},vm.relatedArticles=[],vm.tabs=[],vm.user={},vm.disqusConfig={},vm.section="",vm.showFullText=!0,vm.showAd=!0,vm.titleContainsRedline=!1,vm.hideCart=!0,global.document.snippet&&(vm.snippet=global.document.snippet),vm.$state=$state,vm.queryText=$state.params.q,vm.context=$state.params.ctx,vm.purchaseNow="undefined"!=typeof $state.params.purchaseNow&&"false"!==$state.params.purchaseNow,vm.disqusContainerId="disqusContainer",vm.sipModalSource,vm.displayDocTitle="",vm.helpText="Help Working with Interactive HTML",vm.googleAdTargeting={},vm.isDocHeaderAsideOpened=!1,vm.viewMoreTabsExpanded=!1,vm.DOCUMENT_CONTENT_ID_NAME=layoutConstants.documentContentIdName,vm.breadCrumbPubTitle=breadCrumbPubTitle,vm.keywordString=getKeywordsForMetaTag,vm.viewDocument=viewDocument,vm.showACMContent=showACMContent,vm.scrollToDisqus=scrollToDisqus,vm.scrollToAnchor=scrollToAnchor,vm.expandSection=expandSection,vm.expandDefinitions=expandDefinitions,vm.toggleDocHeaderAsideMobile=toggleDocHeaderAsideMobile,vm.viewMoreTabs=viewMoreTabs,initialize()}angular.module("xpl.document").directive("xplCmptDocument",xplCmptDocument),DocumentComponent.$inject=["$location","$log","$rootScope","$scope","$state","$window","docCustomDenialMsgService","documentConstants","documentService","docLinksConstants","googleAdTargetingService","layoutConstants","responsivenessService","sipModalConstants","userService","utilsService","tealiumService","accordionService"]}(),function(){var contentTypes={standards:"standards",periodicals:"periodicals",conferences:"conferences",preprints:"preprints"};angular.module("xpl.document").constant("documentConstants",{tabs:[{state:".abstract({ctx:null})",title:"Abstract",sectionName:"abstract",tabStateName:"abstract"},{state:'.full({tab:"authors", q:null, ctx:null, section:null, part:null, anchor:null, tabFilter:null})',title:"Authors",hideForContent:contentTypes.standards,sectionName:"authors",tabStateName:"authors"},{state:'.full({tab:"figures", q:null, ctx:null, section:null, part:null, anchor:null, tabFilter:null})',title:"Figures",hideForContent:"",sectionName:"figures",tabStateName:"figures"},{state:'.full({tab:"references", q:null, ctx:null, section:null, part:null, anchor:null, tabFilter:null})',title:"References",hideForContent:"",sectionName:"references",tabStateName:"references"},{state:'.full({tab:"citations", q:null, ctx:null, section:null, part:null, anchor:null, tabFilter:null})',title:"Citations",sectionName:"citedby",tabStateName:"citations"},{state:'.full({tab:"algorithms", q:null, ctx:null, section:null, part:null, anchor:null, tabFilter:null})',title:"Code & Datasets",hideIfUndefined:"document.supplementGroup",sectionName:"algorithms",tabStateName:"algorithms"},{state:'.full({tab:"keywords", q:null, ctx:null, section:null, part:null, anchor:null, tabFilter:null})',title:"Keywords",sectionName:"keywords",tabStateName:"keywords"},{state:'.full({tab:"definitions", q:null, ctx:null, section:null, part:null, anchor:"definitions", tabFilter:null})',title:"Definitions",hideForContent:[contentTypes.periodicals,contentTypes.conferences,contentTypes.preprints],sectionName:"definitions",tabStateName:"definitions"},{state:'.full({tab:"metrics", q:null, ctx:null, section:null, part:null, anchor:null, tabFilter:null})',title:"Metrics",sectionName:"metrics",tabStateName:"metrics"},{state:'.full({tab:"versions", q:null, ctx:null, section:null, part:null, anchor:null, tabFilter:null})',title:"Versions",hideForContent:[contentTypes.periodicals,contentTypes.conferences,contentTypes.preprints],sectionName:"versions",tabStateName:"versions"},{state:'.full({tab:"media", q:null, ctx:null, section:null, part:null, anchor:null, tabFilter:null})',title:"Media",sectionName:"multimedia",tabStateName:"media"},{state:'.full({tab:"similar", q:null, ctx:null, section:null, part:null, anchor:null, tabFilter:null})',title:"Related Articles",hideIfDesktop:!0,sectionName:"similar",tabStateName:"similar"}],events:{sectionChanged:"document.event.sectionChanged",resetFullTextHeaderScroll:"document.event.ft.header.resetScroll",resetFullTextRightRailScroll:"document.event.ft.rightrail.resetScroll"},contentTypes:{standards:contentTypes.standards,periodicals:contentTypes.periodicals,conferences:contentTypes.conferences,preprints:contentTypes.preprints},contentTypeDisplay:{standards:"Standards",periodicals:"Journals & Magazines",conferences:"Conferences",preprints:"Early Access","Early Access Articles":"Early Access"},stdnotice:"This document has been converted into XML for display in HTML. The​ ​IEEE does not take responsibility, nor does it provide any warranty​ ​whatsoever neither expressed nor implied, for any conflicts which may​ ​occur due to conversion errors that are inherent to the conversion​ ​process. In all cases, the IEEE PDF version, published in English,​ ​shall serve as the official document. "}).constant("docLinksConstants",{DOI_LINK_PREFIX:"https://doi.org/"})}(),function(){function documentRoutes($stateProvider,$urlRouterProvider){}angular.module("xpl.document").config(documentRoutes),documentRoutes.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function documentService($http,$log,$q,api,sipModalService){function addCitationAlert(id){return $http.get(api.document.addCitationAlert.replace("{0}",id)).then(addCitationAlertSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocument(id){var self=this,deferred=$q.defer();return Object.keys(self._document).length||(global=global||{},global.document=global.document||{},global.document.metadata=global.document.metadata||{},this._document=JSON.parse(JSON.stringify(global.document.metadata)),this._document.fullTextAccess=global.document.fullTextAccess||this._document.isFreeDocument&&!global.document.denialReason,this._document.denialReason=global.document.denialReason,this._document.denialMessage=global.document.denialMessage,this._document.canAddToFileCabinet=this._document.userInfo&&this._document.userInfo.fileCabinetUser&&("SLOT_NOT_PICKED"===global.document.denialReason||"SLOTS_EXHAUSTED"===global.document.denialReason)&&!this._document.applyOUPFilter,this._document.isGetArticle&&setGetProgramProperties(this._document)),deferred.resolve(self._document),deferred.promise}function getDocumentAbstract(id){var self=this;return self.getDocument(id)}function getDocumentAuthors(id){return $http.get(api.document.authors.replace("{0}",id),{cache:!0}).then(getDocumentAuthorsSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentFullTextToc(id){return $http.get(api.document.toc.replace("{0}",id),{cache:!0}).then(getDocumentFullTextTocSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentSectionList(id,part,highlightTerm){var data,method="GET",url=api.document.sectionList.replace("{0}",id).replace("{1}",part);return highlightTerm&&(method="POST",data=highlightTerm),global.document.firstTime&&(url+="?logAccess=true",global.document.firstTime=!1),$http({method:method,url:url,data:data,cache:!0}).then(getDocumentSectionListSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentSectionListNoParts(id){var url=api.document.sectionListNoParts.replace("{0}",id);return global.document.firstTime&&(url+="?logAccess=true",global.document.firstTime=!1),$http.get(url,{cache:!0}).then(getDocumentSectionListSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentSnippet(id){var url=api.document.snippet.replace("{0}",id);return $http.get(url,{cache:!0}).then(getDocumentSnippetSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentEvolution(id){return $http.get(api.document.evolution.replace("{0}",id),{cache:!0}).then(getDocumentEvolutionSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentFigures(id){return $http.get(api.document.figures.replace("{0}",id),{cache:!0}).then(getDocumentFiguresSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentSectionText(id){return $http.get(api.document.sectionText).then(getDocumentSectionTextSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentInfo(id){return $http.get(api.document.info.replace("{0}",id),{cache:!0}).then(getDocumentInfoSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentRelatedArticles(id){return $http.get(api.document.similar.replace("{0}",id),{cache:!0}).then(getDocumentRelatedArticlesSuccess)["catch"](function(error){return promiseFailure(error,id)})}function searchInFullText(id,txt){return $http.post(api.document.searchInDocument.replace("{0}",id),txt,{cache:!0}).then(searchInFullTextSuccess)["catch"](function(error){return promiseFailure(error,id)})}function updateChargeBackInfo(id,chgbkUser){var queryString="";return chgbkUser.name&&(queryString=queryString+"?name="+chgbkUser.name),chgbkUser.email&&(queryString=queryString+"&chargeback_email="+chgbkUser.email),chgbkUser.code&&(queryString=queryString+"&chargeback_code="+chgbkUser.code),$http.post(api.document.updateChgbkInfo.replace("{0}",id)+queryString,{cache:!0}).then(updateChargeBackInfoSuccess)["catch"](function(error){return promiseFailure(error,id)})}function addCitationAlertSuccess(response){return!0}function getDocumentAuthorsSuccess(response){return response.data}function getDocumentFullTextTocSuccess(response){return response.data}function getDocumentSectionListSuccess(response){return response.data}function getDocumentSnippetSuccess(response){return response.data}function getDocumentEvolutionSuccess(response){return response.data.versions}function getDocumentFiguresSuccess(response){return response.data}function getDocumentSectionTextSuccess(response){var randomNum=Math.floor(5*Math.random());return randomNum=randomNum>response.data.length?response.data.length:randomNum,response.data[randomNum]}function getDocumentInfoSuccess(response){return response.data}function getDocumentRelatedArticlesSuccess(response){return response.data}function searchInFullTextSuccess(response){return response.data}function updateChargeBackInfoSuccess(response){return response.data}function promiseFailure(error,id){return"401"==error.status?($log.error("Error: ",error.statusText?error.statusText:error),error):($log.error("Error",error),error)}function setGetProgramProperties(article){article.sipModalSource=sipModalService.getDocumentModalSource(article,article.userInfo),article.isAccessFromGetProgram=article.fullTextAccess&&article.userInfo.individual&&!global.document.isAccessFromInstitution,(article.sipModalSource||article.isAccessFromGetProgram)&&(article.showGetProgramLearnMore=!0,article.isDynamicHtml=!1,article.isStaticHtml=!1)}function updateMobileLeftrailTooltip(heading,message){mobileLeftrailTooltip.heading=heading,mobileLeftrailTooltip.message=message}function getMobileLeftrailTooltip(){return mobileLeftrailTooltip}var mobileLeftrailTooltip={heading:"test heading",message:"test message"},documentService={_document:{},addCitationAlert:addCitationAlert,getDocument:getDocument,getDocumentAbstract:getDocumentAbstract,getDocumentAuthors:getDocumentAuthors,getDocumentFullTextToc:getDocumentFullTextToc,getDocumentSectionList:getDocumentSectionList,getDocumentSectionListNoParts:getDocumentSectionListNoParts,getDocumentSnippet:getDocumentSnippet,getDocumentEvolution:getDocumentEvolution,getDocumentFigures:getDocumentFigures,getDocumentSectionText:getDocumentSectionText,getDocumentInfo:getDocumentInfo,getDocumentRelatedArticles:getDocumentRelatedArticles,searchInFullText:searchInFullText,updateChargeBackInfo:updateChargeBackInfo,getMobileLeftrailTooltip:getMobileLeftrailTooltip,updateMobileLeftrailTooltip:updateMobileLeftrailTooltip};return documentService}angular.module("xpl.document").factory("documentService",documentService),documentService.$inject=["$http","$log","$q","api","sipModalService"]}(),function(){function xplCmptDocumentAbstract(){return{bindToController:{id:"@"},controller:DocumentAbstractComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-abstract-component.html"}}function DocumentAbstractComponent($filter,$rootScope,$scope,$timeout,$state,$log,documentConstants,documentService,responsivenessService,docLinksConstants,utilService,utilsService){function initialize(){documentService.getDocumentAbstract(vm.id).then(getDocumentAbstractSuccess)["catch"](catchPromiseFailure)}function toggleFullSection(sectionName){vm.abstractSectionControls[sectionName].viewFullSection=!vm.abstractSectionControls[sectionName].viewFullSection,vm.currentSection=sectionName,vm.abstractSectionControls[sectionName].section=$filter("charlimitHtml")(vm.details[sectionName],vm.abstractSectionControls.maxSectionLength,vm.abstractSectionControls[sectionName].viewFullSection,maxSectionLimitExceededCallback),$rootScope.$broadcast(documentConstants.events.resetFullTextRightRailScroll),$rootScope.$broadcast(documentConstants.events.resetFullTextHeaderScroll)}function toggleFullCaption(){vm.graphicalAbstractControls.viewFullCaption=!vm.graphicalAbstractControls.viewFullCaption,vm.graphicalAbstractControls.caption=$filter("charlimitHtml")(vm.details.graphicalAbstract.summary,vm.graphicalAbstractControls.maxCaptionLength,vm.graphicalAbstractControls.viewFullCaption,maxLimitExceededCallback)}function toggleAllISBN(){vm.toggleControls.isbn.viewAll=!vm.toggleControls.isbn.viewAll}function toggleAllISSN(){vm.toggleControls.issn.viewAll=!vm.toggleControls.issn.viewAll}function toggleMetadata(){vm.toggleControls.metadata.viewAll=!vm.toggleControls.metadata.viewAll,$rootScope.$broadcast(documentConstants.events.resetFullTextRightRailScroll),$rootScope.$broadcast(documentConstants.events.resetFullTextHeaderScroll)}function getDocumentAbstractSuccess(data){vm.details=data,vm.doiLink=vm.details.doi?docLinksConstants.DOI_LINK_PREFIX+vm.details.doi:vm.doiLink,$state.params&&$state.params.section&&"abstract"==$state.params.section&&utilsService.scrollTo("#"+layoutConstants.documentContentIdName,50,function(){$rootScope.$broadcast(documentConstants.events.resetFullTextHeaderScroll),$rootScope.$broadcast(documentConstants.events.resetFullTextRightRailScroll)}),void 0!==vm.details.graphicalAbstract&&(vm.jwpOptions={file:vm.details.graphicalAbstract.file,image:vm.details.graphicalAbstract.coverImage,flashplayer:"/assets/vendor/jwplayer/player.swf",caption:vm.details.graphicalAbstract.summary,type:vm.details.graphicalAbstract.type,autoplay:!1,height:300,width:405},responsivenessService.isSmallMobile()&&(vm.jwpOptions.width=250,vm.jwpOptions.height=160),vm.graphicalAbstractControls.caption=$filter("charlimitHtml")(vm.details.graphicalAbstract.summary,vm.graphicalAbstractControls.maxCaptionLength,!1,maxLimitExceededCallback)),void 0!==vm.details["abstract"]&&(vm.currentSection="abstract",vm.abstractSectionControls["abstract"].section=$filter("charlimitHtml")(vm.details["abstract"],vm.abstractSectionControls.maxSectionLength,vm.abstractSectionControls["abstract"].section,maxSectionLimitExceededCallback)),void 0!==vm.details.impactStatement&&(vm.currentSection="impactStatement",vm.abstractSectionControls.impactStatement.section=$filter("charlimitHtml")(vm.details.impactStatement,vm.abstractSectionControls.maxSectionLength,vm.abstractSectionControls.impactStatement.section,maxSectionLimitExceededCallback)),void 0!==vm.details.scope&&(vm.currentSection="scope",vm.abstractSectionControls.scope.section=$filter("charlimitHtml")(vm.details.scope,vm.abstractSectionControls.maxSectionLength,vm.abstractSectionControls.scope.section,maxSectionLimitExceededCallback)),void 0!==vm.details.purpose&&(vm.currentSection="purpose",vm.abstractSectionControls.purpose.section=$filter("charlimitHtml")(vm.details.purpose,vm.abstractSectionControls.maxSectionLength,vm.abstractSectionControls.purpose.section,maxSectionLimitExceededCallback)),Array.isArray(vm.details.isbn)&&1===vm.details.isbn.length&&(vm.toggleControls.isbn.viewAll=!0,vm.toggleControls.isbn.showToggle=!1),Array.isArray(vm.details.issn)&&1===vm.details.issn.length&&(vm.toggleControls.issn.viewAll=!0,vm.toggleControls.issn.showToggle=!1),vm.isMobile&&($rootScope.$broadcast(documentConstants.events.resetFullTextHeaderScroll),$rootScope.$broadcast(documentConstants.events.resetFullTextRightRailScroll))}function catchPromiseFailure(error){$log.error(error)}function maxLimitExceededCallback(isExceeded){vm.graphicalAbstractControls.maxLimitExceeded=isExceeded}function maxSectionLimitExceededCallback(isExceeded){vm.abstractSectionControls[vm.currentSection].maxLimitExceeded=isExceeded}var vm=this;vm.details={},vm.doiLink="",vm.jwpOptions={},vm.currentSection="",vm.abstractSectionControls={"abstract":{viewFullSection:!1,section:null,maxLimitExceeded:!1},impactStatement:{viewFullSection:!1,section:null,maxLimitExceeded:!1},scope:{viewFullSection:!1,section:null,maxLimitExceeded:!1},purpose:{viewFullSection:!1,section:null,maxLimitExceeded:!1},toggleFullSection:toggleFullSection,maxSectionLength:500},vm.graphicalAbstractControls={viewFullCaption:!1,toggleFullCaption:toggleFullCaption,caption:null,maxLimitExceeded:!1,maxCaptionLength:170},vm.toggleControls={isbn:{viewAll:!1,toggleViewAll:toggleAllISBN,showToggle:!0},issn:{viewAll:!1,toggleViewAll:toggleAllISSN,showToggle:!0},metadata:{viewAll:!1,toggleViewAll:toggleMetadata,showToggle:!0}},vm.isMobile=!!responsivenessService.isMobile(),initialize()}angular.module("xpl.document").directive("xplCmptDocumentAbstract",xplCmptDocumentAbstract),DocumentAbstractComponent.$inject=["$filter","$rootScope","$scope","$timeout","$state","$log","documentConstants","documentService","responsivenessService","docLinksConstants","utilService","utilsService"]}(),function(){function xplCmptDocumentAllFigures(){return{bindToController:{id:"@"},controller:DocumentAllFiguresComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-all-figures-component.html"}}function DocumentAllFiguresComponent($location,$anchorScroll,$log,$window,responsivenessService,documentService){function initialize(){documentService.getDocument(vm.id).then(getDocumentSuccess)["catch"](catchPromiseFailure)}function getDocumentSuccess(data){vm.document=data,vm.document.fullTextAccess&&!responsivenessService.isMobile()?documentService.getDocumentFigures(vm.id).then(getDocumentFiguresSuccess)["catch"](catchPromiseFailure):$window.location.href=$window.location.href.replace("all-figures","")}function getDocumentFiguresSuccess(data){updateFigures(data),vm.figures=data.figures,vm.title=data.title,vm.standardNumber=data.standardNumber}function catchPromiseFailure(error){$log.error(error)}function updateFigures(data){for(var figures=data.figures,i=0;i<figures.length;i++){var figure=figures[i];figure.graphic.glance=data.mediaPath+"/"+figure.graphic.glance,figure.graphic.large=data.mediaPath+"/"+figure.graphic.large,figure.graphic.hires=data.mediaPath+"/"+figure.graphic.hires,figure.graphic.small=data.mediaPath+"/"+figure.graphic.small}}var vm=this,$jumpLink=$("#jump-link");vm.document={},vm.figures={},vm.scrollTo=function(id){$location.hash(id),$anchorScroll(),$jumpLink.qtip().hide()},$jumpLink.qtip({content:{text:$jumpLink.next("div")},hide:{event:"unfocus"},position:{my:"top center",at:"bottom center"},show:{event:"click",solo:!0},style:{classes:"qtip-popover all-figures-jump-toc document-toc"}}),initialize()}angular.module("xpl.document").directive("xplCmptDocumentAllFigures",xplCmptDocumentAllFigures),DocumentAllFiguresComponent.$inject=["$location","$anchorScroll","$log","$window","responsivenessService","documentService"]}(),function(){function xplCmptDocumentButtons(documentConstants){return{bindToController:{},controller:DocumentButtons,controllerAs:"vm",replace:!0,restrict:"E",templateUrl:"document/document-buttons.html",link:function($scope){$scope.scrollResetEventName=documentConstants.events.resetScroll}}}function DocumentButtons($log,$scope,$state,documentConstants,documentService,utilsService,accordionService){function initialize(){function updateTabStateParam(newStateParams,oldStateParams){newStateParams.tab!=oldStateParams.tab&&(newStateParams.tab?vm.currentTab=newStateParams.tab:vm.currentTab=void 0)}vm.currentTab=$state.params.tab,vm.queryText=$state.params.q,vm.part=$state.params.part,$scope.$watchCollection(function(){return $state.params},updateTabStateParam)}function scrollTo(id){"related-articles-anchor"===id?utilsService.scrollTo(id,120):utilsService.scrollTo(id,50);
}function expandSection(id){accordionService.selectedElem.section=id,$scope.$root.$broadcast(documentConstants.events.resetFullTextRightRailScroll),$scope.$root.$broadcast(documentConstants.events.resetFullTextHeaderScroll)}function loadFullText(){$state.includes("document.abstract")?$state.go("document.abstract",{q:null,ctx:null,part:1}):$state.go("document.full",{q:null,ctx:null,part:1,section:null,tab:vm.currentTab,anchor:null,tabFilter:null})}function loadOtherContext(context){$state.includes("document.abstract")?$state.go("document.abstract",{q:null,ctx:context,part:null}):$state.go("document.full",{q:null,ctx:context,part:null,section:null,tab:vm.currentTab,anchor:null,tabFilter:null})}var vm=this;vm.$state=$state,vm.fullText=$scope.ft,vm.scrollTo=scrollTo,vm.loadFullText=loadFullText,vm.loadOtherContext=loadOtherContext,vm.expandSection=expandSection,$scope.expandedElem=accordionService.selectedElem,initialize()}angular.module("xpl.document").directive("xplCmptDocumentButtons",xplCmptDocumentButtons),xplCmptDocumentButtons.$inject=["documentConstants"],DocumentButtons.$inject=["$log","$scope","$state","documentConstants","documentService","utilsService","accordionService"]}(),function(){function xplCmptDocumentFullText(){return{bindToController:{id:"@",rightsLink:"@",article:"=",relatedArticles:"=",queryText:"@",currentPartSec:"@",context:"@",viewAtAcm:"&"},controller:DocumentFullTextComponent,controllerAs:"ft",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-full-text-component.html"}}function DocumentFullTextComponent($window,$log,$state,$location,$scope,$rootScope,$timeout,documentService,productService,utilService,utilsService,tealiumService,accordionService,api,documentConstants,$sce,$compile,$anchorScroll,responsivenessService){function initialize(){ft.currentPartSec=decodeURIComponent(ft.currentPartSec);var partSecPair=ft.currentPartSec.split("|");(partSecPair.length=2)&&(ft.currentPart=partSecPair[0],ft.section=partSecPair[1]),ft.currentPart<=1&&(ft.currentPart=1,ft.showPrevious=!1),responsivenessService.isMobile()&&(ft.mobileActions.expandLeftRail=!1),ft.article.fullTextAccess||ft.article.userInfo.institute||ft.article.userInfo.member||ft.article.userInfo.individual||(ft.deniedDefinitionsAccess=!0),documentService.getDocumentFullTextToc(ft.article.articleNumber).then(getDocumentFullTextTocSuccess)["catch"](catchPromiseFailure).then(loadMainSection).then(resolveScrolling)}function loadMainSection(){if($state.params.part&&ft.queryText)getFullText(ft.article.articleNumber,ft.currentPart,ft.queryText).then(callTealium);else if(ft.queryText)documentService.searchInFullText(ft.article.articleNumber,ft.queryText).then(getDocumentSearchReferencesSuccess).then(callTealium)["catch"](catchPromiseFailure);else if(ft.context||"definitions"===$state.params.anchor){if("definitions"===ft.context&&!ft.article.fullTextAccess&&!ft.article.userInfo.institute&&!ft.article.userInfo.member&&!ft.article.userInfo.individual||"definitions"===$state.params.anchor)return ft.loading.main=!1,!1;var reqParams;"citations"===ft.context&&(reqParams={count:30}),productService.getProductDetail(ft.article.articleNumber,ft.context,reqParams).then(getDocumentContextDataSuccess).then(callTealium)["catch"](catchPromiseFailure)}else ft.article.isDynamicHtml?ft.snippet||!(global.document.userLoggedIn||ft.article.isFreeDocument&&!ft.article.denialReason)||ft.article.chargeBackInfo&&(!ft.article.chargeBackInfo||ft.article.chargeBackInfo.showChgbkModal)?getSnippetText(ft.article.articleNumber):(ft.article.fullTextAccess&&"undefined"==typeof global.document.firstTime&&(global.document.firstTime=!0),ft.article.fullTextAccess?productService.getProductDetail(ft.article.articleNumber,"references").then(getReferencesSuccess)["catch"](catchPromiseFailure).then(function(){getFullText(ft.article.articleNumber,ft.currentPart)}).then(callTealium):getFullText(ft.article.articleNumber,ft.currentPart).then(callTealium)):(ft.loading.main=!1,callTealium({}))}function callTealium(responseIgnored){tealiumCall(ft)}function tealiumCall(ft){if(tealiumService.isTealiumEnabled()){var tealiumUtagData={sheet_name:"Dynamic html doc detail",sheet_type:"dynamic html",document_isAbstract:isAbstract(),document_isDHTML:isDHTML(),document_isHTML:!1,document_id:ft.article.articleNumber,document_pub_id:ft.article.publicationNumber,content_type:ft.article.contentType};tealiumService.view(tealiumUtagData)}}function isDHTML(){var retVal=!(!ft.article.isDynamicHtml||ft.showSnippet);return ft.article.isDynamicHtml&&ft.showSnippet&&(!ft.article.fullTextAccess&&ft.article.canAddToFileCabinet?retVal=!1:ft.article.chargeBackInfo&&ft.article.chargeBackInfo.showChgbkModal&&ft.article.fullTextAccess?retVal=!1:ft.article.fullTextAccess||ft.article.canAddToFileCabinet||(retVal=!1)),retVal}function isAbstract(){var retVal=!(isDHTML()&&(!ft.article.fullTextAccess||!ft.article.isACM||ft.contextData));return retVal}function scrollTo(id,margin){margin=margin||80,utilsService.scrollTo(id,margin)}function scrollToToc(id,part){id=id.replace("#",""),part!=ft.currentPart||$state.params.q||$state.params.ctx?$state.go(".",{part:part+"|"+id,section:null,ctx:null,q:null,anchor:null,tabFilter:null}):utilsService.scrollToDynamicDom(id,0,!0)}function expandSection(id){accordionService.selectedElem.section=id,$scope.$root.$broadcast(documentConstants.events.resetFullTextRightRailScroll),$scope.$root.$broadcast(documentConstants.events.resetFullTextHeaderScroll)}function toggleExpandLeftRail(){ft.mobileActions.expandLeftRail=!ft.mobileActions.expandLeftRail}function toggleLeftRailSection(section){ft.mobileActions.expandLeftRailSection[section]=!ft.mobileActions.expandLeftRailSection[section]}function changeMobileLeftrailTooltip(section){"pdf"==section?documentService.updateMobileLeftrailTooltip("Download PDF Disabled","You do not have access to this pdf."):"permission"==section?documentService.updateMobileLeftrailTooltip("Request Permissions Disabled","IEEE is not the copyright holder of this material."):"export"==section?documentService.updateMobileLeftrailTooltip("Export to Collabratec Disabled","Sign in to your personal account to export."):"citations"==section?documentService.updateMobileLeftrailTooltip("Download Citations Disabled","Access this on desktop view."):documentService.updateMobileLeftrailTooltip("Button Disabled","Unable to access area.")}function getFullText(articleNumber,part,highlightTerm){return ft.partsCount?documentService.getDocumentSectionList(articleNumber,part,highlightTerm).then(getDocumentSectionListSuccess)["catch"](catchPromiseFailure):documentService.getDocumentSectionListNoParts(articleNumber).then(getDocumentSectionListSuccess)["catch"](catchPromiseFailure)}function getSnippetText(articleNumber){documentService.getDocumentSnippet(articleNumber).then(getDocumentSectionListSuccess).then(function(){ft.showSnippet=!0}).then(callTealium)["catch"](catchPromiseFailure)}function getDocumentSectionListSuccess(data){var unexpectedError=!1,unexpectedErrorText='<p class="strong">No text returned.</p>';data.status&&("401"==data.status?ft.showSnippet=!0:"4"!==data.status[0]&&"5"!==data.status[0]||(unexpectedError=!0),data=unexpectedError?unexpectedErrorText:data.data),ft.sectionText=data.length?data:unexpectedErrorText,resetMobileScrollbars(),ft.loading.main=!1}function getDocumentSearchReferencesSuccess(data){ft.loading.main=!1,ft.searchReferences=data}function getDocumentContextDataSuccess(data){if(ft.loading.main=!1,ft.contextData=data,ft.contextData.authors)for(var i=0,l=ft.contextData.authors.length;i<l;i++){var authorName=ft.contextData.authors[i].name;ft.contextData.authors[i].hashedName=authorName?utilService.string2Hash(ft.contextData.authors[i].name):null}}function getDocumentFullTextTocSuccess(data){ft.loading.toc=!1,ft.toc=data,ft.partsCount=data.standardParts,ft.currentPart<=1&&(ft.currentPart=1),ft.showNext=parseInt(ft.currentPart)<parseInt(ft.partsCount)}function getReferencesSuccess(data){ft.referenceData=data}function catchPromiseFailure(error){for(var k in ft.loading)ft.loading.hasOwnProperty(k)&&(ft.loading[k]=!1);$log.error(error)}function nextClick(){ft.currentPart<=1&&(ft.currentPart=1,ft.showPrevious=!1),ft.currentPart=parseInt(ft.currentPart)+1,updateSection()}function previousClick(){ft.currentPart<=1&&(ft.currentPart=1,ft.showPrevious=!1),ft.currentPart=parseInt(ft.currentPart)-1,updateSection()}function updateSection(){$state.go($state.current.name,{part:ft.currentPart,q:null,ctx:null,section:null,anchor:null})}function openRightsLink(){$window.open(ft.article.rightsLink,"Rightslink","location=no,toolbar=no,directories=no,status=no, menubar=no,scrollbars=yes,resizable=yes,width=650,height=550")}function printWindow(){$window.print()}function resetMobileScrollbars(){responsivenessService.isMobile()&&($rootScope.$broadcast(documentConstants.events.resetFullTextRightRailScroll),$rootScope.$broadcast(documentConstants.events.resetFullTextHeaderScroll))}function toggleMobileTocContent(){ft.mobileActions.showMobileTocContent=!ft.mobileActions.showMobileTocContent}function resolveScrolling(){$state.params.anchor?$timeout(function(){expandSection($state.params.anchor),scrollTo($state.params.anchor+"-anchor",150)},0):ft.context&&$timeout(function(){expandSection(ft.context),scrollTo(ft.context+"-section-container",150)},0)}var ft=this;ft.showSnippet=!1,ft.sectionList=[],ft.showPrevious=!0,ft.showNext=!0,ft.previousClick=previousClick,ft.nextClick=nextClick,ft.openRightsLink=openRightsLink,ft.printWindow=printWindow,ft.dwnldRefUrl=api.dwnldRefUrl+ft.article.articleNumber,ft.scrollTo=scrollTo,ft.scrollToToc=scrollToToc,ft.expandSection=expandSection,ft.snippet=!1,ft.mobileActions={expandLeftRail:!0,toggleExpandLeftRail:toggleExpandLeftRail,toggleLeftRailSection:toggleLeftRailSection,expandLeftRailSection:{citations:!1,email:!1,alerts:!1},showMobileTocContent:!1,toggleMobileTocContent:toggleMobileTocContent},global.document.snippet&&(ft.snippet=global.document.snippet),ft.section=null,ft.currentPart=1,ft.notice=documentConstants.stdnotice,ft.loading={main:!0,toc:!0},ft.scrollResetEventName=documentConstants.events.resetFullTextHeaderScroll,ft.loadMainSection=loadMainSection,ft.mobileLeftrailTooltipHeading,ft.mobileLeftrailTooltipMessage,ft.changeMobileLeftrailTooltip=changeMobileLeftrailTooltip,ft.deniedDefinitionsAccess=!1,initialize()}angular.module("xpl.document").directive("xplCmptDocumentFullText",xplCmptDocumentFullText),DocumentFullTextComponent.$inject=["$window","$log","$state","$location","$scope","$rootScope","$timeout","documentService","productService","utilService","utilsService","tealiumService","accordionService","api","documentConstants","$sce","$compile","$anchorScroll","responsivenessService"]}(),function(){function xplCmptDocumentFullTextEvolution(){return{bindToController:{evolutionList:"="},controller:DocumentEvolutionComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-full-text-evolution-component.html"}}function DocumentEvolutionComponent($log,documentService){function initialize(){produceEvolutionLists()}function produceEvolutionLists(){if(vm.history=[],vm.evolutionListActive=[],vm.evolutionListInactive=[],vm.evolutionList)for(var i=0;i<vm.evolutionList.length;i++){var item=vm.evolutionList[i],active="ACTIVE"===item.status.toUpperCase();active?vm.evolutionListActive.push(item):vm.evolutionListInactive.push(item),vm.history.push({active:active,on:1===vm[active?"evolutionListActive":"evolutionListInactive"].length,status:item.evolutionStatus,date:item.date})}}var vm=this;vm.history=[],vm.evolutionListActive=[],vm.evolutionListInactive=[],initialize()}angular.module("xpl.document").directive("xplCmptDocumentFullTextEvolution",xplCmptDocumentFullTextEvolution),DocumentEvolutionComponent.$inject=["$log","documentService"]}(),function(){function xplCmptDocumentFullTextExtra(){return{bindToController:{articleNumber:"@",deniedDefinitionsAccess:"@"},controller:DocumentFullTextExtraComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-full-text-extra-component.html"}}function DocumentFullTextExtraComponent($log,$state,documentService,productService){function initialize(){"keywords"!==$state.params.ctx?productService.getProductDetail(vm.articleNumber,"keywords").then(getKeywordsSuccess)["catch"](catchKeywordsPromiseFailure):vm.loading.keywords=!1,"authors"!==$state.params.ctx?productService.getProductDetail(vm.articleNumber,"authors").then(getAuthorsSuccess)["catch"](catchAuthorsPromiseFailure):vm.loading.authors=!1,documentService.getDocumentRelatedArticles(vm.articleNumber).then(getDocumentRelatedArticlesSuccess)["catch"](catchRelatedArticlesPromiseFailure),"citations"!==$state.params.ctx?productService.getProductDetail(vm.articleNumber,"citations").then(getCitationsSuccess)["catch"](catchCitationsPromiseFailure):vm.loading.citations=!1,"references"!==$state.params.ctx?productService.getProductDetail(vm.articleNumber,"references").then(getReferencesSuccess)["catch"](catchReferencesPromiseFailure):vm.loading.references=!1,"footnotes"!==$state.params.ctx?productService.getProductDetail(vm.articleNumber,"footnotes").then(getFootnotesSuccess)["catch"](catchFootnotesPromiseFailure):vm.loading.footnotes=!1,"definitions"!==$state.params.ctx&&"false"===vm.deniedDefinitionsAccess?productService.getProductDetail(vm.articleNumber,"definitions").then(getDefinitionsSuccess)["catch"](catchDefinitionsPromiseFailure):vm.loading.definitions=!1,"disclaimer"!==$state.params.ctx?productService.getProductDetail(vm.articleNumber,"disclaimer").then(getDisclaimerSuccess)["catch"](catchDisclaimerPromiseFailure):vm.loading.disclaimer=!1}function getKeywordsSuccess(data){vm.loading.keywords=!1,vm.data.keywords=data}function getAuthorsSuccess(data){vm.loading.authors=!1,vm.data.authors=data}function getCitationsSuccess(data){vm.loading.citations=!1,vm.data.citations=data}function getReferencesSuccess(data){vm.loading.references=!1,vm.data.references=data}function getFootnotesSuccess(data){vm.loading.footnotes=!1,vm.data.footnotes=data}function getDefinitionsSuccess(data){vm.loading.definitions=!1,vm.data.definitions=data}function getDisclaimerSuccess(data){vm.loading.disclaimer=!1,vm.data.disclaimer=data}function getDocumentRelatedArticlesSuccess(data){vm.loading.relatedArticles=!1,vm.data.relatedArticles=data}function catchKeywordsPromiseFailure(error){vm.loading.keywords=!1,vm.data.keywords=!1,$log.error(error)}function catchAuthorsPromiseFailure(error){vm.loading.authors=!1,vm.data.authors=!1,$log.error(error)}function catchCitationsPromiseFailure(error){vm.loading.citations=!1,vm.data.citations=!1,$log.error(error)}function catchReferencesPromiseFailure(error){vm.loading.references=!1,vm.data.references=!1,$log.error(error)}function catchFootnotesPromiseFailure(error){vm.loading.footnotes=!1,vm.data.footnotes=!1,$log.error(error)}function catchDefinitionsPromiseFailure(error){vm.loading.definitions=!1,vm.data.definitions=!1,$log.error(error)}function catchRelatedArticlesPromiseFailure(error){vm.loading.relatedArticles=!1,vm.data.relatedArticles=!1,$log.error(error)}function catchDisclaimerPromiseFailure(error){vm.loading.disclaimer=!1,vm.data.disclaimer=!1,$log.error(error)}var vm=this;vm.loading={keywords:!0,authors:!0,relatedArticles:!0,citations:!0,references:!0,footnotes:!0,definitions:!0},vm.data={keywords:null,authors:null,relatedArticles:null,citations:null,references:null,footnotes:null,definitions:null},initialize()}angular.module("xpl.document").directive("xplCmptDocumentFullTextExtra",xplCmptDocumentFullTextExtra),DocumentFullTextExtraComponent.$inject=["$log","$state","documentService","productService"]}(),function(){function xplCmptChargeBackButton(){return{bindToController:{articleNumber:"=",userInfo:"=",chgBkInfo:"=",loadFullText:"&"},controller:ChargeBackButtonComponent,controllerAs:"bvm",replace:!0,restrict:"A",scope:{},link:link}}function link(scope,element,attr,ctrl){function openModal(){ctrl.openChargeBack()}element.on("click",openModal)}function ChargeBackButtonComponent($log,$state,$uibModal,documentService){function openChargeBack(){function closedResolve(){}var modalInstance=$uibModal.open({templateUrl:"document/chargeback/chargeback-component.html",controller:ChargeBackComponent,controllerAs:"vm",resolve:{},backdrop:"static"});modalInstance.closed.then(closedResolve)}function ChargeBackComponent($filter,$window,$http,$uibModalInstance,documentService){function submitForm(isValid){vm.errorMsg="",vm.chgBkInfo.showField1&&!vm.chgbkUser.name||vm.chgBkInfo.showField2&&!vm.chgbkUser.email||vm.chgBkInfo.showField3&&!vm.chgbkUser.code?vm.errorMsg="Please enter all the fields.":documentService.updateChargeBackInfo(vm.articleNumber,vm.chgbkUser).then(chgbkSuccess)}function chgbkSuccess(data){"success"===data&&(bvm.chgBkInfo.showChgbkModal=!1,close(),bvm.loadFullText())}function close(){$uibModalInstance.close()}var vm=this;vm.articleNumber=bvm.articleNumber,vm.error=!1,vm.close=close,vm.submitForm=submitForm,vm.errorMsg="",vm.chgBkInfo=bvm.chgBkInfo,vm.chgbkUser={name:bvm.chgBkInfo.chgbkUserField1,email:bvm.chgBkInfo.chgbkUserField2,code:""},vm.chgbkCodeMap=bvm.chgBkInfo.chgbkCodeMap,vm.instName=bvm.chgBkInfo.chgbkInstName,vm.contactName=bvm.chgBkInfo.chgbkInstContactName,vm.contactEmail=bvm.chgBkInfo.chgbkInstContactEmail,vm.isEmpty=function(obj){for(var i in obj)if(obj.hasOwnProperty(i))return!1;return!0}}var bvm=this;bvm.openChargeBack=openChargeBack,ChargeBackComponent.$inject=["$filter","$window","$http","$uibModalInstance","documentService"]}angular.module("xpl.document").directive("xplCmptChargeBackButton",xplCmptChargeBackButton),ChargeBackButtonComponent.$inject=["$log","$state","$uibModal","documentService"]}(),function(){function xplCmptCitationMapButton(){return{bindToController:{articleNumber:"@"},controller:CitationMapButtonComponent,controllerAs:"bvm",replace:!0,restrict:"E",scope:{},templateUrl:"document/citation-map/citation-map-button-component.html"}}function CitationMapButtonComponent($log,$state,$uibModal,documentService){function openMap(){function closedResolve(){}var modalInstance=$uibModal.open({templateUrl:"document/citation-map/citation-map-component.html",controller:CitationMapComponent,controllerAs:"vm",resolve:{}});modalInstance.closed.then(closedResolve)}function CitationMapComponent($filter,$uibModalInstance,productService){function initialize(){productService.getProductDetail(vm.articleNumber,"references").then(getReferencesSuccess)["catch"](catchPromiseFailure).then(function(){productService.getProductDetail(vm.articleNumber,"citations",{count:10}).then(getCitationsSuccess)["catch"](catchPromiseFailure)})}function close(){$uibModalInstance.close()}function prevPage(i){vm.currentPage[i]<=0||(vm.currentPage[i]--,setPagingStates(i))}function nextPage(i){vm.currentPage[i]>=Math.ceil(vm[i].length/vm.pageSize)||(vm.currentPage[i]++,setPagingStates(i))}function setPagingStates(i){vm.hasPrevPage[i]=vm.currentPage[i]>0,vm.hasNextPage[i]=Math.ceil(vm[i].length/vm.pageSize)-1>vm.currentPage[i]}function getReferencesSuccess(data){data.references&&(vm.references=$filter("limitTo")(data.references,10),setPagingStates("references"),vm.articleTitle=data.title)}function getCitationsSuccess(data){if(data.paperCitations&&(data.paperCitations.ieee||data.paperCitations.nonIeee)){var paperCits=data.paperCitations,retCitations=[];paperCits.ieee&&paperCits.ieee.length>0&&(retCitations=$filter("limitTo")(paperCits.ieee,10)),retCitations.length<10&&paperCits.nonIeee&&paperCits.nonIeee.length>0&&(retCitations=retCitations.concat($filter("limitTo")(paperCits.nonIeee,10))),vm.citations=retCitations,setPagingStates("citations"),vm.articleTitle||(vm.articleTitle=data.title)}vm.loading=!1}function loadSection(tabName){close(),$state.go("document.full",{q:null,ctx:tabName,part:null,section:null,tab:tabName,anchor:null,tabFilter:null})}function catchPromiseFailure(error){$log.error(error),vm.error=!0,vm.loading=!1}var vm=this;vm.articleNumber=bvm.articleNumber,vm.error=!1,vm.loading=!0,vm.references=[],vm.citations=[],vm.articleTitle=void 0,vm.pageSize=5,vm.currentPage={references:0,citations:0},vm.hasPrevPage={references:!1,citations:!1},vm.hasNextPage={references:!1,citations:!1},vm.close=close,vm.loadSection=loadSection,vm.prevPage=prevPage,vm.nextPage=nextPage,initialize()}var bvm=this;bvm.openMap=openMap,CitationMapComponent.$inject=["$filter","$uibModalInstance","productService"]}angular.module("xpl.document").directive("xplCmptCitationMapButton",xplCmptCitationMapButton),CitationMapButtonComponent.$inject=["$log","$state","$uibModal","documentService"]}();